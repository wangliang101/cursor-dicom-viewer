function mi(d,y){const{rows:w,columns:F,data:k}=d,{rows:r,columns:W,data:H}=y,M=[],z=[],B=[];for(let q=0;q<W;q++){const V=q*(F-1)/(W-1);M[q]=Math.floor(V),z[q]=Math.min(M[q]+1,F-1),B[q]=V-M[q]}for(let q=0;q<r;q++){const V=q*(w-1)/(r-1),K=Math.floor(V)*F,G=Math.min(K+F,(w-1)*F),re=V-Math.floor(V),ue=1-re,ke=q*W;for(let le=0;le<W;le++){const Te=k[K+M[le]],_e=k[K+z[le]],ie=k[G+M[le]],Ae=k[G+z[le]],be=1-B[le];H[ke+le]=(Te*be+_e*B[le])*ue+(ie*be+Ae*B[le])*re}}return H}function wi(d,y){const{rows:w,columns:F,pixelData:k,samplesPerPixel:r=1}=d,{rows:W,columns:H,pixelData:M}=y,z=[];for(let B=0;B<H;B++){const q=B*(F-1)/(H-1);z[B]=Math.floor(q)*r}for(let B=0;B<W;B++){const q=B*(w-1)/(W-1),V=Math.floor(q)*F*r,K=B*H;for(let G=0;G<H;G++)for(let re=0;re<r;re++)M[K+G+re]=k[V+z[G]+re]}return M}/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const oi=Symbol("Comlink.proxy"),bi=Symbol("Comlink.endpoint"),Pi=Symbol("Comlink.releaseProxy"),Gn=Symbol("Comlink.finalizer"),Ln=Symbol("Comlink.thrown"),ai=d=>typeof d=="object"&&d!==null||typeof d=="function",Ti={canHandle:d=>ai(d)&&d[oi],serialize(d){const{port1:y,port2:w}=new MessageChannel;return Xn(d,y),[w,[w]]},deserialize(d){return d.start(),Ri(d)}},Ci={canHandle:d=>ai(d)&&Ln in d,serialize({value:d}){let y;return d instanceof Error?y={isError:!0,value:{message:d.message,name:d.name,stack:d.stack}}:y={isError:!1,value:d},[y,[]]},deserialize(d){throw d.isError?Object.assign(new Error(d.value.message),d.value):d.value}},si=new Map([["proxy",Ti],["throw",Ci]]);function Ai(d,y){for(const w of d)if(y===w||w==="*"||w instanceof RegExp&&w.test(y))return!0;return!1}function Xn(d,y=globalThis,w=["*"]){y.addEventListener("message",function F(k){if(!k||!k.data)return;if(!Ai(w,k.origin)){console.warn(`Invalid origin '${k.origin}' for comlink proxy`);return}const{id:r,type:W,path:H}=Object.assign({path:[]},k.data),M=(k.data.argumentList||[]).map(On);let z;try{const B=H.slice(0,-1).reduce((V,K)=>V[K],d),q=H.reduce((V,K)=>V[K],d);switch(W){case"GET":z=q;break;case"SET":B[H.slice(-1)[0]]=On(k.data.value),z=!0;break;case"APPLY":z=q.apply(B,M);break;case"CONSTRUCT":{const V=new q(...M);z=Di(V)}break;case"ENDPOINT":{const{port1:V,port2:K}=new MessageChannel;Xn(d,K),z=Fi(V,[V])}break;case"RELEASE":z=void 0;break;default:return}}catch(B){z={value:B,[Ln]:0}}Promise.resolve(z).catch(B=>({value:B,[Ln]:0})).then(B=>{const[q,V]=zn(B);y.postMessage(Object.assign(Object.assign({},q),{id:r}),V),W==="RELEASE"&&(y.removeEventListener("message",F),ui(y),Gn in d&&typeof d[Gn]=="function"&&d[Gn]())}).catch(B=>{const[q,V]=zn({value:new TypeError("Unserializable return value"),[Ln]:0});y.postMessage(Object.assign(Object.assign({},q),{id:r}),V)})}),y.start&&y.start()}function $i(d){return d.constructor.name==="MessagePort"}function ui(d){$i(d)&&d.close()}function Ri(d,y){return Jn(d,[],y)}function Mn(d){if(d)throw new Error("Proxy has been released and is not useable")}function fi(d){return In(d,{type:"RELEASE"}).then(()=>{ui(d)})}const Bn=new WeakMap,Nn="FinalizationRegistry"in globalThis&&new FinalizationRegistry(d=>{const y=(Bn.get(d)||0)-1;Bn.set(d,y),y===0&&fi(d)});function Ei(d,y){const w=(Bn.get(y)||0)+1;Bn.set(y,w),Nn&&Nn.register(d,y,d)}function Si(d){Nn&&Nn.unregister(d)}function Jn(d,y=[],w=function(){}){let F=!1;const k=new Proxy(w,{get(r,W){if(Mn(F),W===Pi)return()=>{Si(k),fi(d),F=!0};if(W==="then"){if(y.length===0)return{then:()=>k};const H=In(d,{type:"GET",path:y.map(M=>M.toString())}).then(On);return H.then.bind(H)}return Jn(d,[...y,W])},set(r,W,H){Mn(F);const[M,z]=zn(H);return In(d,{type:"SET",path:[...y,W].map(B=>B.toString()),value:M},z).then(On)},apply(r,W,H){Mn(F);const M=y[y.length-1];if(M===bi)return In(d,{type:"ENDPOINT"}).then(On);if(M==="bind")return Jn(d,y.slice(0,-1));const[z,B]=Zn(H);return In(d,{type:"APPLY",path:y.map(q=>q.toString()),argumentList:z},B).then(On)},construct(r,W){Mn(F);const[H,M]=Zn(W);return In(d,{type:"CONSTRUCT",path:y.map(z=>z.toString()),argumentList:H},M).then(On)}});return Ei(k,d),k}function ki(d){return Array.prototype.concat.apply([],d)}function Zn(d){const y=d.map(zn);return[y.map(w=>w[0]),ki(y.map(w=>w[1]))]}const ci=new WeakMap;function Fi(d,y){return ci.set(d,y),d}function Di(d){return Object.assign(d,{[oi]:!0})}function zn(d){for(const[y,w]of si)if(w.canHandle(d)){const[F,k]=w.serialize(d);return[{type:"HANDLER",name:y,value:F},k]}return[{type:"RAW",value:d},ci.get(d)||[]]}function On(d){switch(d.type){case"HANDLER":return si.get(d.name).deserialize(d.value);case"RAW":return d.value}}function In(d,y,w){return new Promise(F=>{const k=Oi();d.addEventListener("message",function r(W){!W.data||!W.data.id||W.data.id!==k||(d.removeEventListener("message",r),F(W.data))}),d.start&&d.start(),d.postMessage(Object.assign({id:k},y),w)})}function Oi(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}async function ei(d,y){let w=y.buffer,F=y.byteOffset;const k=y.length;return d.bitsAllocated===16?(F%2&&(w=w.slice(F),F=0),d.pixelRepresentation===0?d.pixelData=new Uint16Array(w,F,k/2):d.pixelData=new Int16Array(w,F,k/2)):d.bitsAllocated===8||d.bitsAllocated===1?d.pixelData=y:d.bitsAllocated===32&&(F%2&&(w=w.slice(F),F=0),d.pixelData=new Float32Array(w,F,k/4)),d}function Ii(d){return(d&255)<<8|d>>8&255}async function Ui(d,y){if(d.bitsAllocated===16){let w=y.buffer,F=y.byteOffset;const k=y.length;F%2&&(w=w.slice(F),F=0),d.pixelRepresentation===0?d.pixelData=new Uint16Array(w,F,k/2):d.pixelData=new Int16Array(w,F,k/2);for(let r=0;r<d.pixelData.length;r++)d.pixelData[r]=Ii(d.pixelData[r])}else d.bitsAllocated===8&&(d.pixelData=y);return d}async function xi(d,y){if(d.bitsAllocated===8)return d.planarConfiguration?Wi(d,y):ji(d,y);if(d.bitsAllocated===16)return Hi(d,y);throw new Error("unsupported pixel format for RLE")}function ji(d,y){const w=y,F=d.rows*d.columns,k=new ArrayBuffer(F*d.samplesPerPixel),r=new DataView(w.buffer,w.byteOffset),W=new Int8Array(w.buffer,w.byteOffset),H=new Int8Array(k);let M=0;const z=r.getInt32(0,!0);for(let B=0;B<z;++B){M=B;let q=r.getInt32((B+1)*4,!0),V=r.getInt32((B+2)*4,!0);V===0&&(V=w.length);const K=F*z;for(;q<V;){const G=W[q++];if(G>=0&&G<=127)for(let re=0;re<G+1&&M<K;++re)H[M]=W[q++],M+=d.samplesPerPixel;else if(G<=-1&&G>=-127){const re=W[q++];for(let ue=0;ue<-G+1&&M<K;++ue)H[M]=re,M+=d.samplesPerPixel}}}return d.pixelData=new Uint8Array(k),d}function Wi(d,y){const w=y,F=d.rows*d.columns,k=new ArrayBuffer(F*d.samplesPerPixel),r=new DataView(w.buffer,w.byteOffset),W=new Int8Array(w.buffer,w.byteOffset),H=new Int8Array(k);let M=0;const z=r.getInt32(0,!0);for(let B=0;B<z;++B){M=B*F;let q=r.getInt32((B+1)*4,!0),V=r.getInt32((B+2)*4,!0);V===0&&(V=w.length);const K=F*z;for(;q<V;){const G=W[q++];if(G>=0&&G<=127)for(let re=0;re<G+1&&M<K;++re)H[M]=W[q++],M++;else if(G<=-1&&G>=-127){const re=W[q++];for(let ue=0;ue<-G+1&&M<K;++ue)H[M]=re,M++}}}return d.pixelData=new Uint8Array(k),d}function Hi(d,y){const w=y,F=d.rows*d.columns,k=new ArrayBuffer(F*d.samplesPerPixel*2),r=new DataView(w.buffer,w.byteOffset),W=new Int8Array(w.buffer,w.byteOffset),H=new Int8Array(k),M=r.getInt32(0,!0);for(let z=0;z<M;++z){let B=0;const q=z===0?1:0;let V=r.getInt32((z+1)*4,!0),K=r.getInt32((z+2)*4,!0);for(K===0&&(K=w.length);V<K;){const G=W[V++];if(G>=0&&G<=127)for(let re=0;re<G+1&&B<F;++re)H[B*2+q]=W[V++],B++;else if(G<=-1&&G>=-127){const re=W[V++];for(let ue=0;ue<-G+1&&B<F;++ue)H[B*2+q]=re,B++}}}return d.pixelRepresentation===0?d.pixelData=new Uint16Array(k):d.pixelData=new Int16Array(k),d}function qn(d){return d&&d.__esModule&&Object.prototype.hasOwnProperty.call(d,"default")?d.default:d}function Mi(d){if(d.__esModule)return d;var y=d.default;if(typeof y=="function"){var w=function F(){return this instanceof F?Reflect.construct(y,arguments,this.constructor):y.apply(this,arguments)};w.prototype=y.prototype}else w={};return Object.defineProperty(w,"__esModule",{value:!0}),Object.keys(d).forEach(function(F){var k=Object.getOwnPropertyDescriptor(d,F);Object.defineProperty(w,F,k.get?k:{enumerable:!0,get:function(){return d[F]}})}),w}var li={exports:{}},Li={},Vi=Object.freeze({__proto__:null,default:Li}),fn=Mi(Vi);(function(d,y){var w=(()=>{var F=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(F=F||__filename),function(k){k=k||{};var r=typeof k<"u"?k:{},W,H;r.ready=new Promise(function(t,e){W=t,H=e});var M=Object.assign({},r),z="./this.program",B=(t,e)=>{throw e},q=typeof window=="object",V=typeof importScripts=="function",K=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",G="";function re(t){return r.locateFile?r.locateFile(t,G):G+t}var ue,ke,le;function Te(t){if(t instanceof Ue)return;be("exiting due to exception: "+t)}if(K){var _e=fn,ie=fn;V?G=ie.dirname(G)+"/":G=__dirname+"/",ue=(t,e)=>(t=Vt(t)?new URL(t):ie.normalize(t),_e.readFileSync(t,e?void 0:"utf8")),le=t=>{var e=ue(t,!0);return e.buffer||(e=new Uint8Array(e)),e},ke=(t,e,s)=>{t=Vt(t)?new URL(t):ie.normalize(t),_e.readFile(t,function(l,g){l?s(l):e(g.buffer)})},process.argv.length>1&&(z=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",function(t){if(!(t instanceof Ue))throw t}),process.on("unhandledRejection",function(t){throw t}),B=(t,e)=>{if(Ur())throw process.exitCode=t,e;Te(e),process.exit(t)},r.inspect=function(){return"[Emscripten Module object]"}}else(q||V)&&(V?G=self.location.href:typeof document<"u"&&document.currentScript&&(G=document.currentScript.src),F&&(G=F),G.indexOf("blob:")!==0?G=G.substr(0,G.replace(/[?#].*/,"").lastIndexOf("/")+1):G="",ue=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText},V&&(le=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),ke=(t,e,s)=>{var l=new XMLHttpRequest;l.open("GET",t,!0),l.responseType="arraybuffer",l.onload=()=>{if(l.status==200||l.status==0&&l.response){e(l.response);return}s()},l.onerror=s,l.send(null)});var Ae=r.print||console.log.bind(console),be=r.printErr||console.warn.bind(console);Object.assign(r,M),M=null,r.arguments&&r.arguments,r.thisProgram&&(z=r.thisProgram),r.quit&&(B=r.quit);var Me;r.wasmBinary&&(Me=r.wasmBinary);var Ot=r.noExitRuntime||!0;typeof WebAssembly!="object"&&Ce("no native wasm support detected");var Ge,yt=!1;function _r(t,e){t||Ce(e)}var mr=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function Jt(t,e,s){for(var l=e+s,g=e;t[g]&&!(g>=l);)++g;if(g-e>16&&t.buffer&&mr)return mr.decode(t.subarray(e,g));for(var b="";e<g;){var C=t[e++];if(!(C&128)){b+=String.fromCharCode(C);continue}var T=t[e++]&63;if((C&224)==192){b+=String.fromCharCode((C&31)<<6|T);continue}var E=t[e++]&63;if((C&240)==224?C=(C&15)<<12|T<<6|E:C=(C&7)<<18|T<<12|E<<6|t[e++]&63,C<65536)b+=String.fromCharCode(C);else{var j=C-65536;b+=String.fromCharCode(55296|j>>10,56320|j&1023)}}return b}function Qe(t,e){return t?Jt(te,t,e):""}function ve(t,e,s,l){if(!(l>0))return 0;for(var g=s,b=s+l-1,C=0;C<t.length;++C){var T=t.charCodeAt(C);if(T>=55296&&T<=57343){var E=t.charCodeAt(++C);T=65536+((T&1023)<<10)|E&1023}if(T<=127){if(s>=b)break;e[s++]=T}else if(T<=2047){if(s+1>=b)break;e[s++]=192|T>>6,e[s++]=128|T&63}else if(T<=65535){if(s+2>=b)break;e[s++]=224|T>>12,e[s++]=128|T>>6&63,e[s++]=128|T&63}else{if(s+3>=b)break;e[s++]=240|T>>18,e[s++]=128|T>>12&63,e[s++]=128|T>>6&63,e[s++]=128|T&63}}return e[s]=0,s-g}function de(t,e,s){return ve(t,te,e,s)}function he(t){for(var e=0,s=0;s<t.length;++s){var l=t.charCodeAt(s);l<=127?e++:l<=2047?e+=2:l>=55296&&l<=57343?(e+=4,++s):e+=3}return e}var ge,ne,te,ce,It,Ie,pe,Xt,Yt;function fr(t){ge=t,r.HEAP8=ne=new Int8Array(t),r.HEAP16=ce=new Int16Array(t),r.HEAP32=Ie=new Int32Array(t),r.HEAPU8=te=new Uint8Array(t),r.HEAPU16=It=new Uint16Array(t),r.HEAPU32=pe=new Uint32Array(t),r.HEAPF32=Xt=new Float32Array(t),r.HEAPF64=Yt=new Float64Array(t)}r.INITIAL_MEMORY;var wr,Dr=[],Or=[],Ir=[];function Ur(){return Ot}function Ut(){if(r.preRun)for(typeof r.preRun=="function"&&(r.preRun=[r.preRun]);r.preRun.length;)Kt(r.preRun.shift());Xe(Dr)}function Ze(){Xe(Or)}function et(){if(r.postRun)for(typeof r.postRun=="function"&&(r.postRun=[r.postRun]);r.postRun.length;)Zt(r.postRun.shift());Xe(Ir)}function Kt(t){Dr.unshift(t)}function Qt(t){Or.unshift(t)}function Zt(t){Ir.unshift(t)}var Je=0,_t=null;function $e(t){Je++,r.monitorRunDependencies&&r.monitorRunDependencies(Je)}function Re(t){if(Je--,r.monitorRunDependencies&&r.monitorRunDependencies(Je),Je==0&&_t){var e=_t;_t=null,e()}}function Ce(t){r.onAbort&&r.onAbort(t),t="Aborted("+t+")",be(t),yt=!0,t+=". Build with -sASSERTIONS for more info.";var e=new WebAssembly.RuntimeError(t);throw H(e),e}var xr="data:application/octet-stream;base64,";function jr(t){return t.startsWith(xr)}function Vt(t){return t.startsWith("file://")}var Fe;Fe="libjpegturbowasm_decode.wasm",jr(Fe)||(Fe=re(Fe));function er(t){try{if(t==Fe&&Me)return new Uint8Array(Me);if(le)return le(t);throw"both async and sync fetching of the wasm failed"}catch(e){Ce(e)}}function cr(){if(!Me&&(q||V)){if(typeof fetch=="function"&&!Vt(Fe))return fetch(Fe,{credentials:"same-origin"}).then(function(t){if(!t.ok)throw"failed to load wasm binary file at '"+Fe+"'";return t.arrayBuffer()}).catch(function(){return er(Fe)});if(ke)return new Promise(function(t,e){ke(Fe,function(s){t(new Uint8Array(s))},e)})}return Promise.resolve().then(function(){return er(Fe)})}function Wr(){var t={a:J};function e(C,T){var E=C.exports;r.asm=E,Ge=r.asm.K,fr(Ge.buffer),wr=r.asm.M,Qt(r.asm.L),Re()}$e();function s(C){e(C.instance)}function l(C){return cr().then(function(T){return WebAssembly.instantiate(T,t)}).then(function(T){return T}).then(C,function(T){be("failed to asynchronously prepare wasm: "+T),Ce(T)})}function g(){return!Me&&typeof WebAssembly.instantiateStreaming=="function"&&!jr(Fe)&&!Vt(Fe)&&!K&&typeof fetch=="function"?fetch(Fe,{credentials:"same-origin"}).then(function(C){var T=WebAssembly.instantiateStreaming(C,t);return T.then(s,function(E){return be("wasm streaming compile failed: "+E),be("falling back to ArrayBuffer instantiation"),l(s)})}):l(s)}if(r.instantiateWasm)try{var b=r.instantiateWasm(t,e);return b}catch(C){be("Module.instantiateWasm callback failed with error: "+C),H(C)}return g().catch(H),{}}function Ue(t){this.name="ExitStatus",this.message="Program terminated with exit("+t+")",this.status=t}function Xe(t){for(;t.length>0;)t.shift()(r)}function ye(t){this.excPtr=t,this.ptr=t-24,this.set_type=function(e){pe[this.ptr+4>>2]=e},this.get_type=function(){return pe[this.ptr+4>>2]},this.set_destructor=function(e){pe[this.ptr+8>>2]=e},this.get_destructor=function(){return pe[this.ptr+8>>2]},this.set_refcount=function(e){Ie[this.ptr>>2]=e},this.set_caught=function(e){e=e?1:0,ne[this.ptr+12>>0]=e},this.get_caught=function(){return ne[this.ptr+12>>0]!=0},this.set_rethrown=function(e){e=e?1:0,ne[this.ptr+13>>0]=e},this.get_rethrown=function(){return ne[this.ptr+13>>0]!=0},this.init=function(e,s){this.set_adjusted_ptr(0),this.set_type(e),this.set_destructor(s),this.set_refcount(0),this.set_caught(!1),this.set_rethrown(!1)},this.add_ref=function(){var e=Ie[this.ptr>>2];Ie[this.ptr>>2]=e+1},this.release_ref=function(){var e=Ie[this.ptr>>2];return Ie[this.ptr>>2]=e-1,e===1},this.set_adjusted_ptr=function(e){pe[this.ptr+16>>2]=e},this.get_adjusted_ptr=function(){return pe[this.ptr+16>>2]},this.get_exception_ptr=function(){var e=x(this.get_type());if(e)return pe[this.excPtr>>2];var s=this.get_adjusted_ptr();return s!==0?s:this.excPtr}}function mt(t,e,s){var l=new ye(t);throw l.init(e,s),t}var ct={};function Rt(t){for(;t.length;){var e=t.pop(),s=t.pop();s(e)}}function xt(t){return this.fromWireType(Ie[t>>2])}var Et={},tt={},jt={},wt=48,bt=57;function lt(t){if(t===void 0)return"_unknown";t=t.replace(/[^a-zA-Z0-9_]/g,"$");var e=t.charCodeAt(0);return e>=wt&&e<=bt?"_"+t:t}function Le(t,e){return t=lt(t),new Function("body","return function "+t+`() {
    "use strict";    return body.apply(this, arguments);
};
`)(e)}function rt(t,e){var s=Le(e,function(l){this.name=e,this.message=l;var g=new Error(l).stack;g!==void 0&&(this.stack=this.toString()+`
`+g.replace(/^Error(:[^\n]*)?\n/,""))});return s.prototype=Object.create(t.prototype),s.prototype.constructor=s,s.prototype.toString=function(){return this.message===void 0?this.name:this.name+": "+this.message},s}var tr=void 0;function Wt(t){throw new tr(t)}function me(t,e,s){t.forEach(function(T){jt[T]=e});function l(T){var E=s(T);E.length!==t.length&&Wt("Mismatched type converter count");for(var j=0;j<t.length;++j)je(t[j],E[j])}var g=new Array(e.length),b=[],C=0;e.forEach((T,E)=>{tt.hasOwnProperty(T)?g[E]=tt[T]:(b.push(T),Et.hasOwnProperty(T)||(Et[T]=[]),Et[T].push(()=>{g[E]=tt[T],++C,C===b.length&&l(g)}))}),b.length===0&&l(g)}function Pt(t){var e=ct[t];delete ct[t];var s=e.rawConstructor,l=e.rawDestructor,g=e.fields,b=g.map(C=>C.getterReturnType).concat(g.map(C=>C.setterArgumentType));me([t],b,C=>{var T={};return g.forEach((E,j)=>{var N=E.fieldName,X=C[j],ee=E.getter,Pe=E.getterContext,ae=C[j+g.length],Se=E.setter,Ke=E.setterContext;T[N]={read:Lt=>X.fromWireType(ee(Pe,Lt)),write:(Lt,un)=>{var Fr=[];Se(Ke,Lt,ae.toWireType(Fr,un)),Rt(Fr)}}}),[{name:e.name,fromWireType:function(E){var j={};for(var N in T)j[N]=T[N].read(E);return l(E),j},toWireType:function(E,j){for(var N in T)if(!(N in j))throw new TypeError('Missing field:  "'+N+'"');var X=s();for(N in T)T[N].write(X,j[N]);return E!==null&&E.push(l,X),X},argPackAdvance:8,readValueFromPointer:xt,destructorFunction:l}]})}function Q(t,e,s,l,g){}function Ee(t){switch(t){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+t)}}function fe(){for(var t=new Array(256),e=0;e<256;++e)t[e]=String.fromCharCode(e);Ve=t}var Ve=void 0;function we(t){for(var e="",s=t;te[s];)e+=Ve[te[s++]];return e}var St=void 0;function se(t){throw new St(t)}function je(t,e,s={}){if(!("argPackAdvance"in e))throw new TypeError("registerType registeredInstance requires argPackAdvance");var l=e.name;if(t||se('type "'+l+'" must have a positive integer typeid pointer'),tt.hasOwnProperty(t)){if(s.ignoreDuplicateRegistrations)return;se("Cannot register type '"+l+"' twice")}if(tt[t]=e,delete jt[t],Et.hasOwnProperty(t)){var g=Et[t];delete Et[t],g.forEach(b=>b())}}function br(t,e,s,l,g){var b=Ee(s);e=we(e),je(t,{name:e,fromWireType:function(C){return!!C},toWireType:function(C,T){return T?l:g},argPackAdvance:8,readValueFromPointer:function(C){var T;if(s===1)T=ne;else if(s===2)T=ce;else if(s===4)T=Ie;else throw new TypeError("Unknown boolean type size: "+e);return this.fromWireType(T[C>>b])},destructorFunction:null})}function lr(t){if(!(this instanceof We)||!(t instanceof We))return!1;for(var e=this.$$.ptrType.registeredClass,s=this.$$.ptr,l=t.$$.ptrType.registeredClass,g=t.$$.ptr;e.baseClass;)s=e.upcast(s),e=e.baseClass;for(;l.baseClass;)g=l.upcast(g),l=l.baseClass;return e===l&&s===g}function De(t){return{count:t.count,deleteScheduled:t.deleteScheduled,preservePointerOnDelete:t.preservePointerOnDelete,ptr:t.ptr,ptrType:t.ptrType,smartPtr:t.smartPtr,smartPtrType:t.smartPtrType}}function dt(t){function e(s){return s.$$.ptrType.registeredClass.name}se(e(t)+" instance already deleted")}var oe=!1;function nt(t){}function rr(t){t.smartPtr?t.smartPtrType.rawDestructor(t.smartPtr):t.ptrType.registeredClass.rawDestructor(t.ptr)}function dr(t){t.count.value-=1;var e=t.count.value===0;e&&rr(t)}function pt(t,e,s){if(e===s)return t;if(s.baseClass===void 0)return null;var l=pt(t,e,s.baseClass);return l===null?null:s.downcast(l)}var Bt={};function Ht(){return Object.keys(ir).length}function Nt(){var t=[];for(var e in ir)ir.hasOwnProperty(e)&&t.push(ir[e]);return t}var nr=[];function kt(){for(;nr.length;){var t=nr.pop();t.$$.deleteScheduled=!1,t.delete()}}var Tt=void 0;function Hr(t){Tt=t,nr.length&&Tt&&Tt(kt)}function Ft(){r.getInheritedInstanceCount=Ht,r.getLiveInheritedInstances=Nt,r.flushPendingDeletes=kt,r.setDelayFunction=Hr}var ir={};function Ct(t,e){for(e===void 0&&se("ptr should not be undefined");t.baseClass;)e=t.upcast(e),t=t.baseClass;return e}function Pr(t,e){return e=Ct(t,e),ir[e]}function Dt(t,e){(!e.ptrType||!e.ptr)&&Wt("makeClassHandle requires ptr and ptrType");var s=!!e.smartPtrType,l=!!e.smartPtr;return s!==l&&Wt("Both smartPtrType and smartPtr must be specified"),e.count={value:1},Ye(Object.create(t,{$$:{value:e}}))}function cn(t){var e=this.getPointee(t);if(!e)return this.destructor(t),null;var s=Pr(this.registeredClass,e);if(s!==void 0){if(s.$$.count.value===0)return s.$$.ptr=e,s.$$.smartPtr=t,s.clone();var l=s.clone();return this.destructor(t),l}function g(){return this.isSmartPointer?Dt(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:e,smartPtrType:this,smartPtr:t}):Dt(this.registeredClass.instancePrototype,{ptrType:this,ptr:t})}var b=this.registeredClass.getActualType(e),C=Bt[b];if(!C)return g.call(this);var T;this.isConst?T=C.constPointerType:T=C.pointerType;var E=pt(e,this.registeredClass,T.registeredClass);return E===null?g.call(this):this.isSmartPointer?Dt(T.registeredClass.instancePrototype,{ptrType:T,ptr:E,smartPtrType:this,smartPtr:t}):Dt(T.registeredClass.instancePrototype,{ptrType:T,ptr:E})}function Ye(t){return typeof FinalizationRegistry>"u"?(Ye=e=>e,t):(oe=new FinalizationRegistry(e=>{dr(e.$$)}),Ye=e=>{var s=e.$$,l=!!s.smartPtr;if(l){var g={$$:s};oe.register(e,g,e)}return e},nt=e=>oe.unregister(e),Ye(t))}function zt(){if(this.$$.ptr||dt(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var t=Ye(Object.create(Object.getPrototypeOf(this),{$$:{value:De(this.$$)}}));return t.$$.count.value+=1,t.$$.deleteScheduled=!1,t}function At(){this.$$.ptr||dt(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&se("Object already scheduled for deletion"),nt(this),dr(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)}function Mr(){return!this.$$.ptr}function qt(){return this.$$.ptr||dt(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&se("Object already scheduled for deletion"),nr.push(this),nr.length===1&&Tt&&Tt(kt),this.$$.deleteScheduled=!0,this}function ln(){We.prototype.isAliasOf=lr,We.prototype.clone=zt,We.prototype.delete=At,We.prototype.isDeleted=Mr,We.prototype.deleteLater=qt}function We(){}function Lr(t,e,s){if(t[e].overloadTable===void 0){var l=t[e];t[e]=function(){return t[e].overloadTable.hasOwnProperty(arguments.length)||se("Function '"+s+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+t[e].overloadTable+")!"),t[e].overloadTable[arguments.length].apply(this,arguments)},t[e].overloadTable=[],t[e].overloadTable[l.argCount]=l}}function dn(t,e,s){r.hasOwnProperty(t)?(se("Cannot register public name '"+t+"' twice"),Lr(r,t,t),r.hasOwnProperty(s)&&se("Cannot register multiple overloads of a function with the same number of arguments ("+s+")!"),r[t].overloadTable[s]=e):r[t]=e}function pn(t,e,s,l,g,b,C,T){this.name=t,this.constructor=e,this.instancePrototype=s,this.rawDestructor=l,this.baseClass=g,this.getActualType=b,this.upcast=C,this.downcast=T,this.pureVirtualFunctions=[]}function Tr(t,e,s){for(;e!==s;)e.upcast||se("Expected null or instance of "+s.name+", got an instance of "+e.name),t=e.upcast(t),e=e.baseClass;return t}function vn(t,e){if(e===null)return this.isReference&&se("null is not a valid "+this.name),0;e.$$||se('Cannot pass "'+$r(e)+'" as a '+this.name),e.$$.ptr||se("Cannot pass deleted object as a pointer of type "+this.name);var s=e.$$.ptrType.registeredClass,l=Tr(e.$$.ptr,s,this.registeredClass);return l}function Oe(t,e){var s;if(e===null)return this.isReference&&se("null is not a valid "+this.name),this.isSmartPointer?(s=this.rawConstructor(),t!==null&&t.push(this.rawDestructor,s),s):0;e.$$||se('Cannot pass "'+$r(e)+'" as a '+this.name),e.$$.ptr||se("Cannot pass deleted object as a pointer of type "+this.name),!this.isConst&&e.$$.ptrType.isConst&&se("Cannot convert argument of type "+(e.$$.smartPtrType?e.$$.smartPtrType.name:e.$$.ptrType.name)+" to parameter type "+this.name);var l=e.$$.ptrType.registeredClass;if(s=Tr(e.$$.ptr,l,this.registeredClass),this.isSmartPointer)switch(e.$$.smartPtr===void 0&&se("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:e.$$.smartPtrType===this?s=e.$$.smartPtr:se("Cannot convert argument of type "+(e.$$.smartPtrType?e.$$.smartPtrType.name:e.$$.ptrType.name)+" to parameter type "+this.name);break;case 1:s=e.$$.smartPtr;break;case 2:if(e.$$.smartPtrType===this)s=e.$$.smartPtr;else{var g=e.clone();s=this.rawShare(s,$t.toHandle(function(){g.delete()})),t!==null&&t.push(this.rawDestructor,s)}break;default:se("Unsupporting sharing policy")}return s}function Cr(t,e){if(e===null)return this.isReference&&se("null is not a valid "+this.name),0;e.$$||se('Cannot pass "'+$r(e)+'" as a '+this.name),e.$$.ptr||se("Cannot pass deleted object as a pointer of type "+this.name),e.$$.ptrType.isConst&&se("Cannot convert argument of type "+e.$$.ptrType.name+" to parameter type "+this.name);var s=e.$$.ptrType.registeredClass,l=Tr(e.$$.ptr,s,this.registeredClass);return l}function vt(t){return this.rawGetPointee&&(t=this.rawGetPointee(t)),t}function pr(t){this.rawDestructor&&this.rawDestructor(t)}function vr(t){t!==null&&t.delete()}function hr(){ht.prototype.getPointee=vt,ht.prototype.destructor=pr,ht.prototype.argPackAdvance=8,ht.prototype.readValueFromPointer=xt,ht.prototype.deleteObject=vr,ht.prototype.fromWireType=cn}function ht(t,e,s,l,g,b,C,T,E,j,N){this.name=t,this.registeredClass=e,this.isReference=s,this.isConst=l,this.isSmartPointer=g,this.pointeeType=b,this.sharingPolicy=C,this.rawGetPointee=T,this.rawConstructor=E,this.rawShare=j,this.rawDestructor=N,!g&&e.baseClass===void 0?l?(this.toWireType=vn,this.destructorFunction=null):(this.toWireType=Cr,this.destructorFunction=null):this.toWireType=Oe}function it(t,e,s){r.hasOwnProperty(t)||Wt("Replacing nonexistant public symbol"),r[t].overloadTable!==void 0&&s!==void 0?r[t].overloadTable[s]=e:(r[t]=e,r[t].argCount=s)}function Vr(t,e,s){var l=r["dynCall_"+t];return s&&s.length?l.apply(null,[e].concat(s)):l.call(null,e)}var He=[];function ot(t){var e=He[t];return e||(t>=He.length&&(He.length=t+1),He[t]=e=wr.get(t)),e}function Br(t,e,s){if(t.includes("j"))return Vr(t,e,s);var l=ot(e).apply(null,s);return l}function Be(t,e){var s=[];return function(){return s.length=0,Object.assign(s,arguments),Br(t,e,s)}}function at(t,e){t=we(t);function s(){return t.includes("j")?Be(t,e):ot(e)}var l=s();return typeof l!="function"&&se("unknown function pointer with signature "+t+": "+e),l}var or=void 0;function Nr(t){var e=a(t),s=we(e);return Y(e),s}function gr(t,e){var s=[],l={};function g(b){if(!l[b]&&!tt[b]){if(jt[b]){jt[b].forEach(g);return}s.push(b),l[b]=!0}}throw e.forEach(g),new or(t+": "+s.map(Nr).join([", "]))}function Ne(t,e,s,l,g,b,C,T,E,j,N,X,ee){N=we(N),b=at(g,b),T&&(T=at(C,T)),j&&(j=at(E,j)),ee=at(X,ee);var Pe=lt(N);dn(Pe,function(){gr("Cannot construct "+N+" due to unbound types",[l])}),me([t,e,s],l?[l]:[],function(ae){ae=ae[0];var Se,Ke;l?(Se=ae.registeredClass,Ke=Se.instancePrototype):Ke=We.prototype;var Lt=Le(Pe,function(){if(Object.getPrototypeOf(this)!==un)throw new St("Use 'new' to construct "+N);if(Fr.constructor_body===void 0)throw new St(N+" has no accessible constructor");var Qn=Fr.constructor_body[arguments.length];if(Qn===void 0)throw new St("Tried to invoke ctor of "+N+" with invalid number of parameters ("+arguments.length+") - expected ("+Object.keys(Fr.constructor_body).toString()+") parameters instead!");return Qn.apply(this,arguments)}),un=Object.create(Ke,{constructor:{value:Lt}});Lt.prototype=un;var Fr=new pn(N,Lt,un,ee,Se,b,T,j),_i=new ht(N,Fr,!0,!1,!1),Yn=new ht(N+"*",Fr,!1,!1,!1),Kn=new ht(N+" const*",Fr,!1,!0,!1);return Bt[t]={pointerType:Yn,constPointerType:Kn},it(Pe,Lt),[_i,Yn,Kn]})}function ze(t,e){for(var s=[],l=0;l<t;l++)s.push(pe[e+l*4>>2]);return s}function ar(t,e){if(!(t instanceof Function))throw new TypeError("new_ called with constructor type "+typeof t+" which is not a function");var s=Le(t.name||"unknownFunctionName",function(){});s.prototype=t.prototype;var l=new s,g=t.apply(l,e);return g instanceof Object?g:l}function xe(t,e,s,l,g){var b=e.length;b<2&&se("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var C=e[1]!==null&&s!==null,T=!1,E=1;E<e.length;++E)if(e[E]!==null&&e[E].destructorFunction===void 0){T=!0;break}for(var j=e[0].name!=="void",N="",X="",E=0;E<b-2;++E)N+=(E!==0?", ":"")+"arg"+E,X+=(E!==0?", ":"")+"arg"+E+"Wired";var ee="return function "+lt(t)+"("+N+`) {
if (arguments.length !== `+(b-2)+`) {
throwBindingError('function `+t+" called with ' + arguments.length + ' arguments, expected "+(b-2)+` args!');
}
`;T&&(ee+=`var destructors = [];
`);var Pe=T?"destructors":"null",ae=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],Se=[se,l,g,Rt,e[0],e[1]];C&&(ee+="var thisWired = classParam.toWireType("+Pe+`, this);
`);for(var E=0;E<b-2;++E)ee+="var arg"+E+"Wired = argType"+E+".toWireType("+Pe+", arg"+E+"); // "+e[E+2].name+`
`,ae.push("argType"+E),Se.push(e[E+2]);if(C&&(X="thisWired"+(X.length>0?", ":"")+X),ee+=(j?"var rv = ":"")+"invoker(fn"+(X.length>0?", ":"")+X+`);
`,T)ee+=`runDestructors(destructors);
`;else for(var E=C?1:2;E<e.length;++E){var Ke=E===1?"thisWired":"arg"+(E-2)+"Wired";e[E].destructorFunction!==null&&(ee+=Ke+"_dtor("+Ke+"); // "+e[E].name+`
`,ae.push(Ke+"_dtor"),Se.push(e[E].destructorFunction))}j&&(ee+=`var ret = retType.fromWireType(rv);
return ret;
`),ee+=`}
`,ae.push(ee);var Lt=ar(Function,ae).apply(null,Se);return Lt}function zr(t,e,s,l,g,b){_r(e>0);var C=ze(e,s);g=at(l,g),me([],[t],function(T){T=T[0];var E="constructor "+T.name;if(T.registeredClass.constructor_body===void 0&&(T.registeredClass.constructor_body=[]),T.registeredClass.constructor_body[e-1]!==void 0)throw new St("Cannot register multiple constructors with identical number of parameters ("+(e-1)+") for class '"+T.name+"'! Overload resolution is currently only performed using the parameter count, not actual type info!");return T.registeredClass.constructor_body[e-1]=()=>{gr("Cannot construct "+T.name+" due to unbound types",C)},me([],C,function(j){return j.splice(1,0,null),T.registeredClass.constructor_body[e-1]=xe(E,j,null,g,b),[]}),[]})}function Ar(t,e,s,l,g,b,C,T){var E=ze(s,l);e=we(e),b=at(g,b),me([],[t],function(j){j=j[0];var N=j.name+"."+e;e.startsWith("@@")&&(e=Symbol[e.substring(2)]),T&&j.registeredClass.pureVirtualFunctions.push(e);function X(){gr("Cannot call "+N+" due to unbound types",E)}var ee=j.registeredClass.instancePrototype,Pe=ee[e];return Pe===void 0||Pe.overloadTable===void 0&&Pe.className!==j.name&&Pe.argCount===s-2?(X.argCount=s-2,X.className=j.name,ee[e]=X):(Lr(ee,e,N),ee[e].overloadTable[s-2]=X),me([],E,function(ae){var Se=xe(N,ae,j,b,C);return ee[e].overloadTable===void 0?(Se.argCount=s-2,ee[e]=Se):ee[e].overloadTable[s-2]=Se,[]}),[]})}var gt=[],qe=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function st(t){t>4&&--qe[t].refcount===0&&(qe[t]=void 0,gt.push(t))}function hn(){for(var t=0,e=5;e<qe.length;++e)qe[e]!==void 0&&++t;return t}function sr(){for(var t=5;t<qe.length;++t)if(qe[t]!==void 0)return qe[t];return null}function ut(){r.count_emval_handles=hn,r.get_first_emval=sr}var $t={toValue:t=>(t||se("Cannot use deleted val. handle = "+t),qe[t].value),toHandle:t=>{switch(t){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:{var e=gt.length?gt.pop():qe.length;return qe[e]={refcount:1,value:t},e}}}};function gn(t,e){e=we(e),je(t,{name:e,fromWireType:function(s){var l=$t.toValue(s);return st(s),l},toWireType:function(s,l){return $t.toHandle(l)},argPackAdvance:8,readValueFromPointer:xt,destructorFunction:null})}function $r(t){if(t===null)return"null";var e=typeof t;return e==="object"||e==="array"||e==="function"?t.toString():""+t}function yn(t,e){switch(e){case 2:return function(s){return this.fromWireType(Xt[s>>2])};case 3:return function(s){return this.fromWireType(Yt[s>>3])};default:throw new TypeError("Unknown float type: "+t)}}function ur(t,e,s){var l=Ee(s);e=we(e),je(t,{name:e,fromWireType:function(g){return g},toWireType:function(g,b){return b},argPackAdvance:8,readValueFromPointer:yn(e,l),destructorFunction:null})}function qr(t,e,s){switch(e){case 0:return s?function(g){return ne[g]}:function(g){return te[g]};case 1:return s?function(g){return ce[g>>1]}:function(g){return It[g>>1]};case 2:return s?function(g){return Ie[g>>2]}:function(g){return pe[g>>2]};default:throw new TypeError("Unknown integer type: "+t)}}function Rr(t,e,s,l,g){e=we(e);var b=Ee(s),C=X=>X;if(l===0){var T=32-8*s;C=X=>X<<T>>>T}var E=e.includes("unsigned"),j=(X,ee)=>{},N;E?N=function(X,ee){return j(ee,this.name),ee>>>0}:N=function(X,ee){return j(ee,this.name),ee},je(t,{name:e,fromWireType:C,toWireType:N,argPackAdvance:8,readValueFromPointer:qr(e,b,l!==0),destructorFunction:null})}function _n(t,e,s){var l=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],g=l[e];function b(C){C=C>>2;var T=pe,E=T[C],j=T[C+1];return new g(ge,j,E)}s=we(s),je(t,{name:s,fromWireType:b,argPackAdvance:8,readValueFromPointer:b},{ignoreDuplicateRegistrations:!0})}function mn(t,e){e=we(e);var s=e==="std::string";je(t,{name:e,fromWireType:function(l){var g=pe[l>>2],b=l+4,C;if(s)for(var T=b,E=0;E<=g;++E){var j=b+E;if(E==g||te[j]==0){var N=j-T,X=Qe(T,N);C===void 0?C=X:(C+="\0",C+=X),T=j+1}}else{for(var ee=new Array(g),E=0;E<g;++E)ee[E]=String.fromCharCode(te[b+E]);C=ee.join("")}return Y(l),C},toWireType:function(l,g){g instanceof ArrayBuffer&&(g=new Uint8Array(g));var b,C=typeof g=="string";C||g instanceof Uint8Array||g instanceof Uint8ClampedArray||g instanceof Int8Array||se("Cannot pass non-string to std::string"),s&&C?b=he(g):b=g.length;var T=Z(4+b+1),E=T+4;if(pe[T>>2]=b,s&&C)de(g,E,b+1);else if(C)for(var j=0;j<b;++j){var N=g.charCodeAt(j);N>255&&(Y(E),se("String has UTF-16 code units that do not fit in 8 bits")),te[E+j]=N}else for(var j=0;j<b;++j)te[E+j]=g[j];return l!==null&&l.push(Y,T),T},argPackAdvance:8,readValueFromPointer:xt,destructorFunction:function(l){Y(l)}})}var Gr=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0;function wn(t,e){for(var s=t,l=s>>1,g=l+e/2;!(l>=g)&&It[l];)++l;if(s=l<<1,s-t>32&&Gr)return Gr.decode(te.subarray(t,s));for(var b="",C=0;!(C>=e/2);++C){var T=ce[t+C*2>>1];if(T==0)break;b+=String.fromCharCode(T)}return b}function bn(t,e,s){if(s===void 0&&(s=2147483647),s<2)return 0;s-=2;for(var l=e,g=s<t.length*2?s/2:t.length,b=0;b<g;++b){var C=t.charCodeAt(b);ce[e>>1]=C,e+=2}return ce[e>>1]=0,e-l}function Pn(t){return t.length*2}function Tn(t,e){for(var s=0,l="";!(s>=e/4);){var g=Ie[t+s*4>>2];if(g==0)break;if(++s,g>=65536){var b=g-65536;l+=String.fromCharCode(55296|b>>10,56320|b&1023)}else l+=String.fromCharCode(g)}return l}function Jr(t,e,s){if(s===void 0&&(s=2147483647),s<4)return 0;for(var l=e,g=l+s-4,b=0;b<t.length;++b){var C=t.charCodeAt(b);if(C>=55296&&C<=57343){var T=t.charCodeAt(++b);C=65536+((C&1023)<<10)|T&1023}if(Ie[e>>2]=C,e+=4,e+4>g)break}return Ie[e>>2]=0,e-l}function Cn(t){for(var e=0,s=0;s<t.length;++s){var l=t.charCodeAt(s);l>=55296&&l<=57343&&++s,e+=4}return e}function An(t,e,s){s=we(s);var l,g,b,C,T;e===2?(l=wn,g=bn,C=Pn,b=()=>It,T=1):e===4&&(l=Tn,g=Jr,C=Cn,b=()=>pe,T=2),je(t,{name:s,fromWireType:function(E){for(var j=pe[E>>2],N=b(),X,ee=E+4,Pe=0;Pe<=j;++Pe){var ae=E+4+Pe*e;if(Pe==j||N[ae>>T]==0){var Se=ae-ee,Ke=l(ee,Se);X===void 0?X=Ke:(X+="\0",X+=Ke),ee=ae+e}}return Y(E),X},toWireType:function(E,j){typeof j!="string"&&se("Cannot pass non-string to C++ string type "+s);var N=C(j),X=Z(4+N+e);return pe[X>>2]=N>>T,g(j,X+4,N+e),E!==null&&E.push(Y,X),X},argPackAdvance:8,readValueFromPointer:xt,destructorFunction:function(E){Y(E)}})}function Xr(t,e,s,l,g,b){ct[t]={name:we(e),rawConstructor:at(s,l),rawDestructor:at(g,b),fields:[]}}function Yr(t,e,s,l,g,b,C,T,E,j){ct[t].fields.push({fieldName:we(e),getterReturnType:s,getter:at(l,g),getterContext:b,setterArgumentType:C,setter:at(T,E),setterContext:j})}function $n(t,e){e=we(e),je(t,{isVoid:!0,name:e,argPackAdvance:0,fromWireType:function(){},toWireType:function(s,l){}})}function Kr(){throw 1/0}var Qr={};function Zr(t){var e=Qr[t];return e===void 0?we(t):e}function Er(){return typeof globalThis=="object"?globalThis:function(){return Function}()("return this")()}function Rn(t){return t===0?$t.toHandle(Er()):(t=Zr(t),$t.toHandle(Er()[t]))}function En(t){t>4&&(qe[t].refcount+=1)}function en(t,e){var s=tt[t];return s===void 0&&se(e+" has unknown type "+Nr(t)),s}function tn(t){for(var e="",s=0;s<t;++s)e+=(s!==0?", ":"")+"arg"+s;for(var l=()=>pe,g="return function emval_allocator_"+t+`(constructor, argTypes, args) {
  var HEAPU32 = getMemory();
`,s=0;s<t;++s)g+="var argType"+s+" = requireRegisteredType(HEAPU32[((argTypes)>>2)], 'parameter "+s+`');
var arg`+s+" = argType"+s+`.readValueFromPointer(args);
args += argType`+s+`['argPackAdvance'];
argTypes += 4;
`;return g+="var obj = new constructor("+e+`);
return valueToHandle(obj);
}
`,new Function("requireRegisteredType","Module","valueToHandle","getMemory",g)(en,r,$t.toHandle,l)}var rn={};function Sn(t,e,s,l){t=$t.toValue(t);var g=rn[e];return g||(g=tn(e),rn[e]=g),g(t,s,l)}function kn(t,e){t=en(t,"_emval_take_value");var s=t.readValueFromPointer(e);return $t.toHandle(s)}function Fn(){Ce("")}function Sr(t,e,s){te.copyWithin(t,e,e+s)}function Dn(){return 2147483648}function Mt(t){try{return Ge.grow(t-ge.byteLength+65535>>>16),fr(Ge.buffer),1}catch{}}function nn(t){var e=te.length;t=t>>>0;var s=Dn();if(t>s)return!1;let l=(E,j)=>E+(j-E%j)%j;for(var g=1;g<=4;g*=2){var b=e*(1+.2/g);b=Math.min(b,t+100663296);var C=Math.min(s,l(Math.max(t,b),65536)),T=Mt(C);if(T)return!0}return!1}var ft={};function on(){return z||"./this.program"}function Gt(){if(!Gt.strings){var t=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:t,_:on()};for(var s in ft)ft[s]===void 0?delete e[s]:e[s]=ft[s];var l=[];for(var s in e)l.push(s+"="+e[s]);Gt.strings=l}return Gt.strings}function kr(t,e,s){for(var l=0;l<t.length;++l)ne[e++>>0]=t.charCodeAt(l);ne[e>>0]=0}function an(t,e){var s=0;return Gt().forEach(function(l,g){var b=e+s;pe[t+g*4>>2]=b,kr(l,b),s+=l.length+1}),0}function yr(t,e){var s=Gt();pe[t>>2]=s.length;var l=0;return s.forEach(function(g){l+=g.length+1}),pe[e>>2]=l,0}function sn(t){Ur()||(r.onExit&&r.onExit(t),yt=!0),B(t,new Ue(t))}function u(t,e){sn(t)}var f=u;function v(t){return 52}function P(t,e,s,l,g){return 70}var $=[null,[],[]];function D(t,e){var s=$[t];e===0||e===10?((t===1?Ae:be)(Jt(s,0)),s.length=0):s.push(e)}function O(t,e,s,l){for(var g=0,b=0;b<s;b++){var C=pe[e>>2],T=pe[e+4>>2];e+=8;for(var E=0;E<T;E++)D(t,te[C+E]);g+=T}return pe[l>>2]=g,0}function R(t){var e=r["_"+t];return e}function U(t,e){ne.set(t,e)}function L(t,e,s,l,g){var b={string:ae=>{var Se=0;if(ae!=null&&ae!==0){var Ke=(ae.length<<2)+1;Se=A(Ke),de(ae,Se,Ke)}return Se},array:ae=>{var Se=A(ae.length);return U(ae,Se),Se}};function C(ae){return e==="string"?Qe(ae):e==="boolean"?!!ae:ae}var T=R(t),E=[],j=0;if(l)for(var N=0;N<l.length;N++){var X=b[s[N]];X?(j===0&&(j=p()),E[N]=X(l[N])):E[N]=l[N]}var ee=T.apply(null,E);function Pe(ae){return j!==0&&_(j),C(ae)}return ee=Pe(ee),ee}tr=r.InternalError=rt(Error,"InternalError"),fe(),St=r.BindingError=rt(Error,"BindingError"),ln(),Ft(),hr(),or=r.UnboundTypeError=rt(Error,"UnboundTypeError"),ut();var J={g:mt,A:Pt,w:Q,F:br,u:Ne,t:zr,c:Ar,E:gn,m:ur,b:Rr,a:_n,l:mn,h:An,J:Xr,d:Yr,G:$n,x:Kr,i:st,r:Rn,p:En,q:Sn,s:kn,j:Fn,D:Sr,y:nn,z:an,B:yr,I:f,C:v,v:P,k:O,o:S,n:c,H:i,f:I,e:n};Wr(),r.___wasm_call_ctors=function(){return(r.___wasm_call_ctors=r.asm.L).apply(null,arguments)};var Z=r._malloc=function(){return(Z=r._malloc=r.asm.N).apply(null,arguments)},Y=r._free=function(){return(Y=r._free=r.asm.O).apply(null,arguments)},a=r.___getTypeName=function(){return(a=r.___getTypeName=r.asm.P).apply(null,arguments)};r.__embind_initialize_bindings=function(){return(r.__embind_initialize_bindings=r.asm.Q).apply(null,arguments)};var o=r._setThrew=function(){return(o=r._setThrew=r.asm.R).apply(null,arguments)},p=r.stackSave=function(){return(p=r.stackSave=r.asm.S).apply(null,arguments)},_=r.stackRestore=function(){return(_=r.stackRestore=r.asm.T).apply(null,arguments)},A=r.stackAlloc=function(){return(A=r.stackAlloc=r.asm.U).apply(null,arguments)},x=r.___cxa_is_pointer_type=function(){return(x=r.___cxa_is_pointer_type=r.asm.V).apply(null,arguments)};r.dynCall_jiji=function(){return(r.dynCall_jiji=r.asm.W).apply(null,arguments)};function I(t,e){var s=p();try{ot(t)(e)}catch(l){if(_(s),l!==l+0)throw l;o(1,0)}}function S(t,e){var s=p();try{return ot(t)(e)}catch(l){if(_(s),l!==l+0)throw l;o(1,0)}}function n(t,e,s,l){var g=p();try{ot(t)(e,s,l)}catch(b){if(_(g),b!==b+0)throw b;o(1,0)}}function i(t,e,s,l){var g=p();try{return ot(t)(e,s,l)}catch(b){if(_(g),b!==b+0)throw b;o(1,0)}}function c(t,e,s){var l=p();try{return ot(t)(e,s)}catch(g){if(_(l),g!==g+0)throw g;o(1,0)}}r.ccall=L;var h;_t=function t(){h||m(),h||(_t=t)};function m(t){if(Je>0||(Ut(),Je>0))return;function e(){h||(h=!0,r.calledRun=!0,!yt&&(Ze(),W(r),r.onRuntimeInitialized&&r.onRuntimeInitialized(),et()))}r.setStatus?(r.setStatus("Running..."),setTimeout(function(){setTimeout(function(){r.setStatus("")},1),e()},1)):e()}if(r.preInit)for(typeof r.preInit=="function"&&(r.preInit=[r.preInit]);r.preInit.length>0;)r.preInit.pop()();return m(),k.ready}})();d.exports=w})(li);var Bi=li.exports,Ni=qn(Bi);const zi=new URL("/cursor-dicom-viewer/assets/libjpegturbowasm_decode-daqMmuVl.wasm",import.meta.url),Vn={codec:void 0,decoder:void 0};function qi(){if(Vn.codec)return Promise.resolve();const d=Ni({locateFile:y=>y.endsWith(".wasm")?zi.toString():y});return new Promise((y,w)=>{d.then(F=>{Vn.codec=F,Vn.decoder=new F.JPEGDecoder,y()},w)})}async function Gi(d,y){await qi();const w=Vn.decoder;w.getEncodedBuffer(d.length).set(d),w.decode();const k=w.getFrameInfo(),r=w.getDecodedBuffer(),W={columns:k.width,rows:k.height,bitsPerPixel:k.bitsPerSample,signed:y.signed,bytesPerPixel:y.bytesPerPixel,componentsPerPixel:k.componentCount},H=Ji(k,r),M={frameInfo:k};return{...y,pixelData:H,imageInfo:W,encodeOptions:M,...M,...W}}function Ji(d,y){return d.isSigned?new Int8Array(y.buffer,y.byteOffset,y.byteLength):new Uint8Array(y.buffer,y.byteOffset,y.byteLength)}const Wn={JpegImage:void 0,decodeConfig:{}};function Xi(d){return Wn.decodeConfig=d,Wn.JpegImage?Promise.resolve():new Promise((y,w)=>{import("./jpeg-HBGIxCW8.js").then(F=>{Wn.JpegImage=F.default,y()}).catch(w)})}async function Yi(d,y){if(await Xi(),typeof Wn.JpegImage>"u")throw new Error("No JPEG Baseline decoder loaded");const w=new Wn.JpegImage;if(w.parse(y),w.colorTransform=!1,d.bitsAllocated===8)return d.pixelData=w.getData(d.columns,d.rows),d;if(d.bitsAllocated===16)return d.pixelData=w.getData16(d.columns,d.rows),d}const Hn={jpeg:void 0,decodeConfig:{}};function Ki(d){return Hn.decodeConfig=d,Hn.jpeg?Promise.resolve():new Promise((y,w)=>{import("./lossless-BIYWXcdg.js").then(({Decoder:F})=>{const k=new F;Hn.jpeg=k,y()},w)})}async function ti(d,y){if(await Ki(),typeof Hn.jpeg>"u")throw new Error("No JPEG Lossless decoder loaded");const w=d.bitsAllocated<=8?1:2,F=y.buffer,k=Hn.jpeg.decode(F,y.byteOffset,y.length,w);return d.pixelRepresentation===0?d.bitsAllocated===16?(d.pixelData=new Uint16Array(k.buffer),d):(d.pixelData=new Uint8Array(k.buffer),d):(d.pixelData=new Int16Array(k.buffer),d)}var di={exports:{}};(function(d,y){var w=(()=>{var F=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(F=F||__filename),function(k){k=k||{};var r=typeof k<"u"?k:{},W,H;r.ready=new Promise(function(u,f){W=u,H=f});var M=Object.assign({},r),z=typeof window=="object",B=typeof importScripts=="function",q=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",V="";function K(u){return r.locateFile?r.locateFile(u,V):V+u}var G,re,ue;if(q){var ke=fn,le=fn;B?V=le.dirname(V)+"/":V=__dirname+"/",G=(u,f)=>(u=_t(u)?new URL(u):le.normalize(u),ke.readFileSync(u,f?void 0:"utf8")),ue=u=>{var f=G(u,!0);return f.buffer||(f=new Uint8Array(f)),f},re=(u,f,v)=>{u=_t(u)?new URL(u):le.normalize(u),ke.readFile(u,function(P,$){P?v(P):f($.buffer)})},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),process.on("uncaughtException",function(u){if(!(u instanceof jr))throw u}),process.on("unhandledRejection",function(u){throw u}),r.inspect=function(){return"[Emscripten Module object]"}}else(z||B)&&(B?V=self.location.href:typeof document<"u"&&document.currentScript&&(V=document.currentScript.src),F&&(V=F),V.indexOf("blob:")!==0?V=V.substr(0,V.replace(/[?#].*/,"").lastIndexOf("/")+1):V="",G=u=>{var f=new XMLHttpRequest;return f.open("GET",u,!1),f.send(null),f.responseText},B&&(ue=u=>{var f=new XMLHttpRequest;return f.open("GET",u,!1),f.responseType="arraybuffer",f.send(null),new Uint8Array(f.response)}),re=(u,f,v)=>{var P=new XMLHttpRequest;P.open("GET",u,!0),P.responseType="arraybuffer",P.onload=()=>{if(P.status==200||P.status==0&&P.response){f(P.response);return}v()},P.onerror=v,P.send(null)});r.print||console.log.bind(console);var Te=r.printErr||console.warn.bind(console);Object.assign(r,M),M=null,r.arguments&&r.arguments,r.thisProgram&&r.thisProgram,r.quit&&r.quit;var _e;r.wasmBinary&&(_e=r.wasmBinary),r.noExitRuntime,typeof WebAssembly!="object"&&Qt("no native wasm support detected");var ie,Ae=!1;function be(u,f){u||Qt(f)}var Me=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function Ot(u,f,v){for(var P=f+v,$=f;u[$]&&!($>=P);)++$;if($-f>16&&u.buffer&&Me)return Me.decode(u.subarray(f,$));for(var D="";f<$;){var O=u[f++];if(!(O&128)){D+=String.fromCharCode(O);continue}var R=u[f++]&63;if((O&224)==192){D+=String.fromCharCode((O&31)<<6|R);continue}var U=u[f++]&63;if((O&240)==224?O=(O&15)<<12|R<<6|U:O=(O&7)<<18|R<<12|U<<6|u[f++]&63,O<65536)D+=String.fromCharCode(O);else{var L=O-65536;D+=String.fromCharCode(55296|L>>10,56320|L&1023)}}return D}function Ge(u,f){return u?Ot(ve,u,f):""}function yt(u,f,v,P){if(!(P>0))return 0;for(var $=v,D=v+P-1,O=0;O<u.length;++O){var R=u.charCodeAt(O);if(R>=55296&&R<=57343){var U=u.charCodeAt(++O);R=65536+((R&1023)<<10)|U&1023}if(R<=127){if(v>=D)break;f[v++]=R}else if(R<=2047){if(v+1>=D)break;f[v++]=192|R>>6,f[v++]=128|R&63}else if(R<=65535){if(v+2>=D)break;f[v++]=224|R>>12,f[v++]=128|R>>6&63,f[v++]=128|R&63}else{if(v+3>=D)break;f[v++]=240|R>>18,f[v++]=128|R>>12&63,f[v++]=128|R>>6&63,f[v++]=128|R&63}}return f[v]=0,v-$}function _r(u,f,v){return yt(u,ve,f,v)}function mr(u){for(var f=0,v=0;v<u.length;++v){var P=u.charCodeAt(v);P<=127?f++:P<=2047?f+=2:P>=55296&&P<=57343?(f+=4,++v):f+=3}return f}var Jt,Qe,ve,de,he,ge,ne,te,ce;function It(u){Jt=u,r.HEAP8=Qe=new Int8Array(u),r.HEAP16=de=new Int16Array(u),r.HEAP32=ge=new Int32Array(u),r.HEAPU8=ve=new Uint8Array(u),r.HEAPU16=he=new Uint16Array(u),r.HEAPU32=ne=new Uint32Array(u),r.HEAPF32=te=new Float32Array(u),r.HEAPF64=ce=new Float64Array(u)}r.INITIAL_MEMORY;var Ie,pe=[],Xt=[],Yt=[];function fr(){if(r.preRun)for(typeof r.preRun=="function"&&(r.preRun=[r.preRun]);r.preRun.length;)Or(r.preRun.shift());Vt(pe)}function wr(){Vt(Xt)}function Dr(){if(r.postRun)for(typeof r.postRun=="function"&&(r.postRun=[r.postRun]);r.postRun.length;)Ur(r.postRun.shift());Vt(Yt)}function Or(u){pe.unshift(u)}function Ir(u){Xt.unshift(u)}function Ur(u){Yt.unshift(u)}var Ut=0,Ze=null;function et(u){Ut++,r.monitorRunDependencies&&r.monitorRunDependencies(Ut)}function Kt(u){if(Ut--,r.monitorRunDependencies&&r.monitorRunDependencies(Ut),Ut==0&&Ze){var f=Ze;Ze=null,f()}}function Qt(u){r.onAbort&&r.onAbort(u),u="Aborted("+u+")",Te(u),Ae=!0,u+=". Build with -sASSERTIONS for more info.";var f=new WebAssembly.RuntimeError(u);throw H(f),f}var Zt="data:application/octet-stream;base64,";function Je(u){return u.startsWith(Zt)}function _t(u){return u.startsWith("file://")}var $e;$e="charlswasm_decode.wasm",Je($e)||($e=K($e));function Re(u){try{if(u==$e&&_e)return new Uint8Array(_e);if(ue)return ue(u);throw"both async and sync fetching of the wasm failed"}catch(f){Qt(f)}}function Ce(){if(!_e&&(z||B)){if(typeof fetch=="function"&&!_t($e))return fetch($e,{credentials:"same-origin"}).then(function(u){if(!u.ok)throw"failed to load wasm binary file at '"+$e+"'";return u.arrayBuffer()}).catch(function(){return Re($e)});if(re)return new Promise(function(u,f){re($e,function(v){u(new Uint8Array(v))},f)})}return Promise.resolve().then(function(){return Re($e)})}function xr(){var u={a:Dn};function f(O,R){var U=O.exports;r.asm=U,ie=r.asm.z,It(ie.buffer),Ie=r.asm.C,Ir(r.asm.A),Kt()}et();function v(O){f(O.instance)}function P(O){return Ce().then(function(R){return WebAssembly.instantiate(R,u)}).then(function(R){return R}).then(O,function(R){Te("failed to asynchronously prepare wasm: "+R),Qt(R)})}function $(){return!_e&&typeof WebAssembly.instantiateStreaming=="function"&&!Je($e)&&!_t($e)&&!q&&typeof fetch=="function"?fetch($e,{credentials:"same-origin"}).then(function(O){var R=WebAssembly.instantiateStreaming(O,u);return R.then(v,function(U){return Te("wasm streaming compile failed: "+U),Te("falling back to ArrayBuffer instantiation"),P(v)})}):P(v)}if(r.instantiateWasm)try{var D=r.instantiateWasm(u,f);return D}catch(O){Te("Module.instantiateWasm callback failed with error: "+O),H(O)}return $().catch(H),{}}function jr(u){this.name="ExitStatus",this.message="Program terminated with exit("+u+")",this.status=u}function Vt(u){for(;u.length>0;)u.shift()(r)}function Fe(u){this.excPtr=u,this.ptr=u-24,this.set_type=function(f){ne[this.ptr+4>>2]=f},this.get_type=function(){return ne[this.ptr+4>>2]},this.set_destructor=function(f){ne[this.ptr+8>>2]=f},this.get_destructor=function(){return ne[this.ptr+8>>2]},this.set_refcount=function(f){ge[this.ptr>>2]=f},this.set_caught=function(f){f=f?1:0,Qe[this.ptr+12>>0]=f},this.get_caught=function(){return Qe[this.ptr+12>>0]!=0},this.set_rethrown=function(f){f=f?1:0,Qe[this.ptr+13>>0]=f},this.get_rethrown=function(){return Qe[this.ptr+13>>0]!=0},this.init=function(f,v){this.set_adjusted_ptr(0),this.set_type(f),this.set_destructor(v),this.set_refcount(0),this.set_caught(!1),this.set_rethrown(!1)},this.add_ref=function(){var f=ge[this.ptr>>2];ge[this.ptr>>2]=f+1},this.release_ref=function(){var f=ge[this.ptr>>2];return ge[this.ptr>>2]=f-1,f===1},this.set_adjusted_ptr=function(f){ne[this.ptr+16>>2]=f},this.get_adjusted_ptr=function(){return ne[this.ptr+16>>2]},this.get_exception_ptr=function(){var f=an(this.get_type());if(f)return ne[this.excPtr>>2];var v=this.get_adjusted_ptr();return v!==0?v:this.excPtr}}function er(u,f,v){var P=new Fe(u);throw P.init(f,v),u}var cr={};function Wr(u){for(;u.length;){var f=u.pop(),v=u.pop();v(f)}}function Ue(u){return this.fromWireType(ge[u>>2])}var Xe={},ye={},mt={},ct=48,Rt=57;function xt(u){if(u===void 0)return"_unknown";u=u.replace(/[^a-zA-Z0-9_]/g,"$");var f=u.charCodeAt(0);return f>=ct&&f<=Rt?"_"+u:u}function Et(u,f){return u=xt(u),new Function("body","return function "+u+`() {
    "use strict";    return body.apply(this, arguments);
};
`)(f)}function tt(u,f){var v=Et(f,function(P){this.name=f,this.message=P;var $=new Error(P).stack;$!==void 0&&(this.stack=this.toString()+`
`+$.replace(/^Error(:[^\n]*)?\n/,""))});return v.prototype=Object.create(u.prototype),v.prototype.constructor=v,v.prototype.toString=function(){return this.message===void 0?this.name:this.name+": "+this.message},v}var jt=void 0;function wt(u){throw new jt(u)}function bt(u,f,v){u.forEach(function(R){mt[R]=f});function P(R){var U=v(R);U.length!==u.length&&wt("Mismatched type converter count");for(var L=0;L<u.length;++L)Ee(u[L],U[L])}var $=new Array(f.length),D=[],O=0;f.forEach((R,U)=>{ye.hasOwnProperty(R)?$[U]=ye[R]:(D.push(R),Xe.hasOwnProperty(R)||(Xe[R]=[]),Xe[R].push(()=>{$[U]=ye[R],++O,O===D.length&&P($)}))}),D.length===0&&P($)}function lt(u){var f=cr[u];delete cr[u];var v=f.rawConstructor,P=f.rawDestructor,$=f.fields,D=$.map(O=>O.getterReturnType).concat($.map(O=>O.setterArgumentType));bt([u],D,O=>{var R={};return $.forEach((U,L)=>{var J=U.fieldName,Z=O[L],Y=U.getter,a=U.getterContext,o=O[L+$.length],p=U.setter,_=U.setterContext;R[J]={read:A=>Z.fromWireType(Y(a,A)),write:(A,x)=>{var I=[];p(_,A,o.toWireType(I,x)),Wr(I)}}}),[{name:f.name,fromWireType:function(U){var L={};for(var J in R)L[J]=R[J].read(U);return P(U),L},toWireType:function(U,L){for(var J in R)if(!(J in L))throw new TypeError('Missing field:  "'+J+'"');var Z=v();for(J in R)R[J].write(Z,L[J]);return U!==null&&U.push(P,Z),Z},argPackAdvance:8,readValueFromPointer:Ue,destructorFunction:P}]})}function Le(u,f,v,P,$){}function rt(u){switch(u){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+u)}}function tr(){for(var u=new Array(256),f=0;f<256;++f)u[f]=String.fromCharCode(f);Wt=u}var Wt=void 0;function me(u){for(var f="",v=u;ve[v];)f+=Wt[ve[v++]];return f}var Pt=void 0;function Q(u){throw new Pt(u)}function Ee(u,f,v={}){if(!("argPackAdvance"in f))throw new TypeError("registerType registeredInstance requires argPackAdvance");var P=f.name;if(u||Q('type "'+P+'" must have a positive integer typeid pointer'),ye.hasOwnProperty(u)){if(v.ignoreDuplicateRegistrations)return;Q("Cannot register type '"+P+"' twice")}if(ye[u]=f,delete mt[u],Xe.hasOwnProperty(u)){var $=Xe[u];delete Xe[u],$.forEach(D=>D())}}function fe(u,f,v,P,$){var D=rt(v);f=me(f),Ee(u,{name:f,fromWireType:function(O){return!!O},toWireType:function(O,R){return R?P:$},argPackAdvance:8,readValueFromPointer:function(O){var R;if(v===1)R=Qe;else if(v===2)R=de;else if(v===4)R=ge;else throw new TypeError("Unknown boolean type size: "+f);return this.fromWireType(R[O>>D])},destructorFunction:null})}function Ve(u){if(!(this instanceof Ye)||!(u instanceof Ye))return!1;for(var f=this.$$.ptrType.registeredClass,v=this.$$.ptr,P=u.$$.ptrType.registeredClass,$=u.$$.ptr;f.baseClass;)v=f.upcast(v),f=f.baseClass;for(;P.baseClass;)$=P.upcast($),P=P.baseClass;return f===P&&v===$}function we(u){return{count:u.count,deleteScheduled:u.deleteScheduled,preservePointerOnDelete:u.preservePointerOnDelete,ptr:u.ptr,ptrType:u.ptrType,smartPtr:u.smartPtr,smartPtrType:u.smartPtrType}}function St(u){function f(v){return v.$$.ptrType.registeredClass.name}Q(f(u)+" instance already deleted")}var se=!1;function je(u){}function br(u){u.smartPtr?u.smartPtrType.rawDestructor(u.smartPtr):u.ptrType.registeredClass.rawDestructor(u.ptr)}function lr(u){u.count.value-=1;var f=u.count.value===0;f&&br(u)}function De(u,f,v){if(f===v)return u;if(v.baseClass===void 0)return null;var P=De(u,f,v.baseClass);return P===null?null:v.downcast(P)}var dt={};function oe(){return Object.keys(Nt).length}function nt(){var u=[];for(var f in Nt)Nt.hasOwnProperty(f)&&u.push(Nt[f]);return u}var rr=[];function dr(){for(;rr.length;){var u=rr.pop();u.$$.deleteScheduled=!1,u.delete()}}var pt=void 0;function Bt(u){pt=u,rr.length&&pt&&pt(dr)}function Ht(){r.getInheritedInstanceCount=oe,r.getLiveInheritedInstances=nt,r.flushPendingDeletes=dr,r.setDelayFunction=Bt}var Nt={};function nr(u,f){for(f===void 0&&Q("ptr should not be undefined");u.baseClass;)f=u.upcast(f),u=u.baseClass;return f}function kt(u,f){return f=nr(u,f),Nt[f]}function Tt(u,f){(!f.ptrType||!f.ptr)&&wt("makeClassHandle requires ptr and ptrType");var v=!!f.smartPtrType,P=!!f.smartPtr;return v!==P&&wt("Both smartPtrType and smartPtr must be specified"),f.count={value:1},Ft(Object.create(u,{$$:{value:f}}))}function Hr(u){var f=this.getPointee(u);if(!f)return this.destructor(u),null;var v=kt(this.registeredClass,f);if(v!==void 0){if(v.$$.count.value===0)return v.$$.ptr=f,v.$$.smartPtr=u,v.clone();var P=v.clone();return this.destructor(u),P}function $(){return this.isSmartPointer?Tt(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:f,smartPtrType:this,smartPtr:u}):Tt(this.registeredClass.instancePrototype,{ptrType:this,ptr:u})}var D=this.registeredClass.getActualType(f),O=dt[D];if(!O)return $.call(this);var R;this.isConst?R=O.constPointerType:R=O.pointerType;var U=De(f,this.registeredClass,R.registeredClass);return U===null?$.call(this):this.isSmartPointer?Tt(R.registeredClass.instancePrototype,{ptrType:R,ptr:U,smartPtrType:this,smartPtr:u}):Tt(R.registeredClass.instancePrototype,{ptrType:R,ptr:U})}function Ft(u){return typeof FinalizationRegistry>"u"?(Ft=f=>f,u):(se=new FinalizationRegistry(f=>{lr(f.$$)}),Ft=f=>{var v=f.$$,P=!!v.smartPtr;if(P){var $={$$:v};se.register(f,$,f)}return f},je=f=>se.unregister(f),Ft(u))}function ir(){if(this.$$.ptr||St(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var u=Ft(Object.create(Object.getPrototypeOf(this),{$$:{value:we(this.$$)}}));return u.$$.count.value+=1,u.$$.deleteScheduled=!1,u}function Ct(){this.$$.ptr||St(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&Q("Object already scheduled for deletion"),je(this),lr(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)}function Pr(){return!this.$$.ptr}function Dt(){return this.$$.ptr||St(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&Q("Object already scheduled for deletion"),rr.push(this),rr.length===1&&pt&&pt(dr),this.$$.deleteScheduled=!0,this}function cn(){Ye.prototype.isAliasOf=Ve,Ye.prototype.clone=ir,Ye.prototype.delete=Ct,Ye.prototype.isDeleted=Pr,Ye.prototype.deleteLater=Dt}function Ye(){}function zt(u,f,v){if(u[f].overloadTable===void 0){var P=u[f];u[f]=function(){return u[f].overloadTable.hasOwnProperty(arguments.length)||Q("Function '"+v+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+u[f].overloadTable+")!"),u[f].overloadTable[arguments.length].apply(this,arguments)},u[f].overloadTable=[],u[f].overloadTable[P.argCount]=P}}function At(u,f,v){r.hasOwnProperty(u)?((v===void 0||r[u].overloadTable!==void 0&&r[u].overloadTable[v]!==void 0)&&Q("Cannot register public name '"+u+"' twice"),zt(r,u,u),r.hasOwnProperty(v)&&Q("Cannot register multiple overloads of a function with the same number of arguments ("+v+")!"),r[u].overloadTable[v]=f):(r[u]=f,v!==void 0&&(r[u].numArguments=v))}function Mr(u,f,v,P,$,D,O,R){this.name=u,this.constructor=f,this.instancePrototype=v,this.rawDestructor=P,this.baseClass=$,this.getActualType=D,this.upcast=O,this.downcast=R,this.pureVirtualFunctions=[]}function qt(u,f,v){for(;f!==v;)f.upcast||Q("Expected null or instance of "+v.name+", got an instance of "+f.name),u=f.upcast(u),f=f.baseClass;return u}function ln(u,f){if(f===null)return this.isReference&&Q("null is not a valid "+this.name),0;f.$$||Q('Cannot pass "'+st(f)+'" as a '+this.name),f.$$.ptr||Q("Cannot pass deleted object as a pointer of type "+this.name);var v=f.$$.ptrType.registeredClass,P=qt(f.$$.ptr,v,this.registeredClass);return P}function We(u,f){var v;if(f===null)return this.isReference&&Q("null is not a valid "+this.name),this.isSmartPointer?(v=this.rawConstructor(),u!==null&&u.push(this.rawDestructor,v),v):0;f.$$||Q('Cannot pass "'+st(f)+'" as a '+this.name),f.$$.ptr||Q("Cannot pass deleted object as a pointer of type "+this.name),!this.isConst&&f.$$.ptrType.isConst&&Q("Cannot convert argument of type "+(f.$$.smartPtrType?f.$$.smartPtrType.name:f.$$.ptrType.name)+" to parameter type "+this.name);var P=f.$$.ptrType.registeredClass;if(v=qt(f.$$.ptr,P,this.registeredClass),this.isSmartPointer)switch(f.$$.smartPtr===void 0&&Q("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:f.$$.smartPtrType===this?v=f.$$.smartPtr:Q("Cannot convert argument of type "+(f.$$.smartPtrType?f.$$.smartPtrType.name:f.$$.ptrType.name)+" to parameter type "+this.name);break;case 1:v=f.$$.smartPtr;break;case 2:if(f.$$.smartPtrType===this)v=f.$$.smartPtr;else{var $=f.clone();v=this.rawShare(v,gt.toHandle(function(){$.delete()})),u!==null&&u.push(this.rawDestructor,v)}break;default:Q("Unsupporting sharing policy")}return v}function Lr(u,f){if(f===null)return this.isReference&&Q("null is not a valid "+this.name),0;f.$$||Q('Cannot pass "'+st(f)+'" as a '+this.name),f.$$.ptr||Q("Cannot pass deleted object as a pointer of type "+this.name),f.$$.ptrType.isConst&&Q("Cannot convert argument of type "+f.$$.ptrType.name+" to parameter type "+this.name);var v=f.$$.ptrType.registeredClass,P=qt(f.$$.ptr,v,this.registeredClass);return P}function dn(u){return this.rawGetPointee&&(u=this.rawGetPointee(u)),u}function pn(u){this.rawDestructor&&this.rawDestructor(u)}function Tr(u){u!==null&&u.delete()}function vn(){Oe.prototype.getPointee=dn,Oe.prototype.destructor=pn,Oe.prototype.argPackAdvance=8,Oe.prototype.readValueFromPointer=Ue,Oe.prototype.deleteObject=Tr,Oe.prototype.fromWireType=Hr}function Oe(u,f,v,P,$,D,O,R,U,L,J){this.name=u,this.registeredClass=f,this.isReference=v,this.isConst=P,this.isSmartPointer=$,this.pointeeType=D,this.sharingPolicy=O,this.rawGetPointee=R,this.rawConstructor=U,this.rawShare=L,this.rawDestructor=J,!$&&f.baseClass===void 0?P?(this.toWireType=ln,this.destructorFunction=null):(this.toWireType=Lr,this.destructorFunction=null):this.toWireType=We}function Cr(u,f,v){r.hasOwnProperty(u)||wt("Replacing nonexistant public symbol"),r[u].overloadTable!==void 0&&v!==void 0?r[u].overloadTable[v]=f:(r[u]=f,r[u].argCount=v)}function vt(u,f,v){var P=r["dynCall_"+u];return v&&v.length?P.apply(null,[f].concat(v)):P.call(null,f)}var pr=[];function vr(u){var f=pr[u];return f||(u>=pr.length&&(pr.length=u+1),pr[u]=f=Ie.get(u)),f}function hr(u,f,v){if(u.includes("j"))return vt(u,f,v);var P=vr(f).apply(null,v);return P}function ht(u,f){var v=[];return function(){return v.length=0,Object.assign(v,arguments),hr(u,f,v)}}function it(u,f){u=me(u);function v(){return u.includes("j")?ht(u,f):vr(f)}var P=v();return typeof P!="function"&&Q("unknown function pointer with signature "+u+": "+f),P}var Vr=void 0;function He(u){var f=nn(u),v=me(f);return ft(f),v}function ot(u,f){var v=[],P={};function $(D){if(!P[D]&&!ye[D]){if(mt[D]){mt[D].forEach($);return}v.push(D),P[D]=!0}}throw f.forEach($),new Vr(u+": "+v.map(He).join([", "]))}function Br(u,f,v,P,$,D,O,R,U,L,J,Z,Y){J=me(J),D=it($,D),R&&(R=it(O,R)),L&&(L=it(U,L)),Y=it(Z,Y);var a=xt(J);At(a,function(){ot("Cannot construct "+J+" due to unbound types",[P])}),bt([u,f,v],P?[P]:[],function(o){o=o[0];var p,_;P?(p=o.registeredClass,_=p.instancePrototype):_=Ye.prototype;var A=Et(a,function(){if(Object.getPrototypeOf(this)!==x)throw new Pt("Use 'new' to construct "+J);if(I.constructor_body===void 0)throw new Pt(J+" has no accessible constructor");var c=I.constructor_body[arguments.length];if(c===void 0)throw new Pt("Tried to invoke ctor of "+J+" with invalid number of parameters ("+arguments.length+") - expected ("+Object.keys(I.constructor_body).toString()+") parameters instead!");return c.apply(this,arguments)}),x=Object.create(_,{constructor:{value:A}});A.prototype=x;var I=new Mr(J,A,x,Y,p,D,R,L),S=new Oe(J,I,!0,!1,!1),n=new Oe(J+"*",I,!1,!1,!1),i=new Oe(J+" const*",I,!1,!0,!1);return dt[u]={pointerType:n,constPointerType:i},Cr(a,A),[S,n,i]})}function Be(u,f){for(var v=[],P=0;P<u;P++)v.push(ne[f+P*4>>2]);return v}function at(u,f){if(!(u instanceof Function))throw new TypeError("new_ called with constructor type "+typeof u+" which is not a function");var v=Et(u.name||"unknownFunctionName",function(){});v.prototype=u.prototype;var P=new v,$=u.apply(P,f);return $ instanceof Object?$:P}function or(u,f,v,P,$){var D=f.length;D<2&&Q("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var O=f[1]!==null&&v!==null,R=!1,U=1;U<f.length;++U)if(f[U]!==null&&f[U].destructorFunction===void 0){R=!0;break}for(var L=f[0].name!=="void",J="",Z="",U=0;U<D-2;++U)J+=(U!==0?", ":"")+"arg"+U,Z+=(U!==0?", ":"")+"arg"+U+"Wired";var Y="return function "+xt(u)+"("+J+`) {
if (arguments.length !== `+(D-2)+`) {
throwBindingError('function `+u+" called with ' + arguments.length + ' arguments, expected "+(D-2)+` args!');
}
`;R&&(Y+=`var destructors = [];
`);var a=R?"destructors":"null",o=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],p=[Q,P,$,Wr,f[0],f[1]];O&&(Y+="var thisWired = classParam.toWireType("+a+`, this);
`);for(var U=0;U<D-2;++U)Y+="var arg"+U+"Wired = argType"+U+".toWireType("+a+", arg"+U+"); // "+f[U+2].name+`
`,o.push("argType"+U),p.push(f[U+2]);if(O&&(Z="thisWired"+(Z.length>0?", ":"")+Z),Y+=(L?"var rv = ":"")+"invoker(fn"+(Z.length>0?", ":"")+Z+`);
`,R)Y+=`runDestructors(destructors);
`;else for(var U=O?1:2;U<f.length;++U){var _=U===1?"thisWired":"arg"+(U-2)+"Wired";f[U].destructorFunction!==null&&(Y+=_+"_dtor("+_+"); // "+f[U].name+`
`,o.push(_+"_dtor"),p.push(f[U].destructorFunction))}L&&(Y+=`var ret = retType.fromWireType(rv);
return ret;
`),Y+=`}
`,o.push(Y);var A=at(Function,o).apply(null,p);return A}function Nr(u,f,v,P,$,D){be(f>0);var O=Be(f,v);$=it(P,$),bt([],[u],function(R){R=R[0];var U="constructor "+R.name;if(R.registeredClass.constructor_body===void 0&&(R.registeredClass.constructor_body=[]),R.registeredClass.constructor_body[f-1]!==void 0)throw new Pt("Cannot register multiple constructors with identical number of parameters ("+(f-1)+") for class '"+R.name+"'! Overload resolution is currently only performed using the parameter count, not actual type info!");return R.registeredClass.constructor_body[f-1]=()=>{ot("Cannot construct "+R.name+" due to unbound types",O)},bt([],O,function(L){return L.splice(1,0,null),R.registeredClass.constructor_body[f-1]=or(U,L,null,$,D),[]}),[]})}function gr(u,f,v,P,$,D,O,R){var U=Be(v,P);f=me(f),D=it($,D),bt([],[u],function(L){L=L[0];var J=L.name+"."+f;f.startsWith("@@")&&(f=Symbol[f.substring(2)]),R&&L.registeredClass.pureVirtualFunctions.push(f);function Z(){ot("Cannot call "+J+" due to unbound types",U)}var Y=L.registeredClass.instancePrototype,a=Y[f];return a===void 0||a.overloadTable===void 0&&a.className!==L.name&&a.argCount===v-2?(Z.argCount=v-2,Z.className=L.name,Y[f]=Z):(zt(Y,f,J),Y[f].overloadTable[v-2]=Z),bt([],U,function(o){var p=or(J,o,L,D,O);return Y[f].overloadTable===void 0?(p.argCount=v-2,Y[f]=p):Y[f].overloadTable[v-2]=p,[]}),[]})}var Ne=[],ze=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function ar(u){u>4&&--ze[u].refcount===0&&(ze[u]=void 0,Ne.push(u))}function xe(){for(var u=0,f=5;f<ze.length;++f)ze[f]!==void 0&&++u;return u}function zr(){for(var u=5;u<ze.length;++u)if(ze[u]!==void 0)return ze[u];return null}function Ar(){r.count_emval_handles=xe,r.get_first_emval=zr}var gt={toValue:u=>(u||Q("Cannot use deleted val. handle = "+u),ze[u].value),toHandle:u=>{switch(u){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:{var f=Ne.length?Ne.pop():ze.length;return ze[f]={refcount:1,value:u},f}}}};function qe(u,f){f=me(f),Ee(u,{name:f,fromWireType:function(v){var P=gt.toValue(v);return ar(v),P},toWireType:function(v,P){return gt.toHandle(P)},argPackAdvance:8,readValueFromPointer:Ue,destructorFunction:null})}function st(u){if(u===null)return"null";var f=typeof u;return f==="object"||f==="array"||f==="function"?u.toString():""+u}function hn(u,f){switch(f){case 2:return function(v){return this.fromWireType(te[v>>2])};case 3:return function(v){return this.fromWireType(ce[v>>3])};default:throw new TypeError("Unknown float type: "+u)}}function sr(u,f,v){var P=rt(v);f=me(f),Ee(u,{name:f,fromWireType:function($){return $},toWireType:function($,D){return D},argPackAdvance:8,readValueFromPointer:hn(f,P),destructorFunction:null})}function ut(u,f,v,P,$,D){var O=Be(f,v);u=me(u),$=it(P,$),At(u,function(){ot("Cannot call "+u+" due to unbound types",O)},f-1),bt([],O,function(R){var U=[R[0],null].concat(R.slice(1));return Cr(u,or(u,U,null,$,D),f-1),[]})}function $t(u,f,v){switch(f){case 0:return v?function($){return Qe[$]}:function($){return ve[$]};case 1:return v?function($){return de[$>>1]}:function($){return he[$>>1]};case 2:return v?function($){return ge[$>>2]}:function($){return ne[$>>2]};default:throw new TypeError("Unknown integer type: "+u)}}function gn(u,f,v,P,$){f=me(f);var D=rt(v),O=Z=>Z;if(P===0){var R=32-8*v;O=Z=>Z<<R>>>R}var U=f.includes("unsigned"),L=(Z,Y)=>{},J;U?J=function(Z,Y){return L(Y,this.name),Y>>>0}:J=function(Z,Y){return L(Y,this.name),Y},Ee(u,{name:f,fromWireType:O,toWireType:J,argPackAdvance:8,readValueFromPointer:$t(f,D,P!==0),destructorFunction:null})}function $r(u,f,v){var P=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],$=P[f];function D(O){O=O>>2;var R=ne,U=R[O],L=R[O+1];return new $(Jt,L,U)}v=me(v),Ee(u,{name:v,fromWireType:D,argPackAdvance:8,readValueFromPointer:D},{ignoreDuplicateRegistrations:!0})}function yn(u,f){f=me(f);var v=f==="std::string";Ee(u,{name:f,fromWireType:function(P){var $=ne[P>>2],D=P+4,O;if(v)for(var R=D,U=0;U<=$;++U){var L=D+U;if(U==$||ve[L]==0){var J=L-R,Z=Ge(R,J);O===void 0?O=Z:(O+="\0",O+=Z),R=L+1}}else{for(var Y=new Array($),U=0;U<$;++U)Y[U]=String.fromCharCode(ve[D+U]);O=Y.join("")}return ft(P),O},toWireType:function(P,$){$ instanceof ArrayBuffer&&($=new Uint8Array($));var D,O=typeof $=="string";O||$ instanceof Uint8Array||$ instanceof Uint8ClampedArray||$ instanceof Int8Array||Q("Cannot pass non-string to std::string"),v&&O?D=mr($):D=$.length;var R=Mt(4+D+1),U=R+4;if(ne[R>>2]=D,v&&O)_r($,U,D+1);else if(O)for(var L=0;L<D;++L){var J=$.charCodeAt(L);J>255&&(ft(U),Q("String has UTF-16 code units that do not fit in 8 bits")),ve[U+L]=J}else for(var L=0;L<D;++L)ve[U+L]=$[L];return P!==null&&P.push(ft,R),R},argPackAdvance:8,readValueFromPointer:Ue,destructorFunction:function(P){ft(P)}})}var ur=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0;function qr(u,f){for(var v=u,P=v>>1,$=P+f/2;!(P>=$)&&he[P];)++P;if(v=P<<1,v-u>32&&ur)return ur.decode(ve.subarray(u,v));for(var D="",O=0;!(O>=f/2);++O){var R=de[u+O*2>>1];if(R==0)break;D+=String.fromCharCode(R)}return D}function Rr(u,f,v){if(v===void 0&&(v=2147483647),v<2)return 0;v-=2;for(var P=f,$=v<u.length*2?v/2:u.length,D=0;D<$;++D){var O=u.charCodeAt(D);de[f>>1]=O,f+=2}return de[f>>1]=0,f-P}function _n(u){return u.length*2}function mn(u,f){for(var v=0,P="";!(v>=f/4);){var $=ge[u+v*4>>2];if($==0)break;if(++v,$>=65536){var D=$-65536;P+=String.fromCharCode(55296|D>>10,56320|D&1023)}else P+=String.fromCharCode($)}return P}function Gr(u,f,v){if(v===void 0&&(v=2147483647),v<4)return 0;for(var P=f,$=P+v-4,D=0;D<u.length;++D){var O=u.charCodeAt(D);if(O>=55296&&O<=57343){var R=u.charCodeAt(++D);O=65536+((O&1023)<<10)|R&1023}if(ge[f>>2]=O,f+=4,f+4>$)break}return ge[f>>2]=0,f-P}function wn(u){for(var f=0,v=0;v<u.length;++v){var P=u.charCodeAt(v);P>=55296&&P<=57343&&++v,f+=4}return f}function bn(u,f,v){v=me(v);var P,$,D,O,R;f===2?(P=qr,$=Rr,O=_n,D=()=>he,R=1):f===4&&(P=mn,$=Gr,O=wn,D=()=>ne,R=2),Ee(u,{name:v,fromWireType:function(U){for(var L=ne[U>>2],J=D(),Z,Y=U+4,a=0;a<=L;++a){var o=U+4+a*f;if(a==L||J[o>>R]==0){var p=o-Y,_=P(Y,p);Z===void 0?Z=_:(Z+="\0",Z+=_),Y=o+f}}return ft(U),Z},toWireType:function(U,L){typeof L!="string"&&Q("Cannot pass non-string to C++ string type "+v);var J=O(L),Z=Mt(4+J+f);return ne[Z>>2]=J>>R,$(L,Z+4,J+f),U!==null&&U.push(ft,Z),Z},argPackAdvance:8,readValueFromPointer:Ue,destructorFunction:function(U){ft(U)}})}function Pn(u,f,v,P,$,D){cr[u]={name:me(f),rawConstructor:it(v,P),rawDestructor:it($,D),fields:[]}}function Tn(u,f,v,P,$,D,O,R,U,L){cr[u].fields.push({fieldName:me(f),getterReturnType:v,getter:it(P,$),getterContext:D,setterArgumentType:O,setter:it(R,U),setterContext:L})}function Jr(u,f){f=me(f),Ee(u,{isVoid:!0,name:f,argPackAdvance:0,fromWireType:function(){},toWireType:function(v,P){}})}var Cn={};function An(u){var f=Cn[u];return f===void 0?me(u):f}function Xr(){return typeof globalThis=="object"?globalThis:function(){return Function}()("return this")()}function Yr(u){return u===0?gt.toHandle(Xr()):(u=An(u),gt.toHandle(Xr()[u]))}function $n(u){u>4&&(ze[u].refcount+=1)}function Kr(u,f){var v=ye[u];return v===void 0&&Q(f+" has unknown type "+He(u)),v}function Qr(u){for(var f="",v=0;v<u;++v)f+=(v!==0?", ":"")+"arg"+v;for(var P=()=>ne,$="return function emval_allocator_"+u+`(constructor, argTypes, args) {
  var HEAPU32 = getMemory();
`,v=0;v<u;++v)$+="var argType"+v+" = requireRegisteredType(HEAPU32[((argTypes)>>2)], 'parameter "+v+`');
var arg`+v+" = argType"+v+`.readValueFromPointer(args);
args += argType`+v+`['argPackAdvance'];
argTypes += 4;
`;return $+="var obj = new constructor("+f+`);
return valueToHandle(obj);
}
`,new Function("requireRegisteredType","Module","valueToHandle","getMemory",$)(Kr,r,gt.toHandle,P)}var Zr={};function Er(u,f,v,P){u=gt.toValue(u);var $=Zr[f];return $||($=Qr(f),Zr[f]=$),$(u,v,P)}function Rn(u,f){u=Kr(u,"_emval_take_value");var v=u.readValueFromPointer(f);return gt.toHandle(v)}function En(){Qt("")}function en(u,f,v){ve.copyWithin(u,f,f+v)}function tn(){return 2147483648}function rn(u){try{return ie.grow(u-Jt.byteLength+65535>>>16),It(ie.buffer),1}catch{}}function Sn(u){var f=ve.length;u=u>>>0;var v=tn();if(u>v)return!1;let P=(U,L)=>U+(L-U%L)%L;for(var $=1;$<=4;$*=2){var D=f*(1+.2/$);D=Math.min(D,u+100663296);var O=Math.min(v,P(Math.max(u,D),65536)),R=rn(O);if(R)return!0}return!1}function kn(u){var f=r["_"+u];return f}function Fn(u,f){Qe.set(u,f)}function Sr(u,f,v,P,$){var D={string:o=>{var p=0;if(o!=null&&o!==0){var _=(o.length<<2)+1;p=kr(_),_r(o,p,_)}return p},array:o=>{var p=kr(o.length);return Fn(o,p),p}};function O(o){return f==="string"?Ge(o):f==="boolean"?!!o:o}var R=kn(u),U=[],L=0;if(P)for(var J=0;J<P.length;J++){var Z=D[v[J]];Z?(L===0&&(L=on()),U[J]=Z(P[J])):U[J]=P[J]}var Y=R.apply(null,U);function a(o){return L!==0&&Gt(L),O(o)}return Y=a(Y),Y}jt=r.InternalError=tt(Error,"InternalError"),tr(),Pt=r.BindingError=tt(Error,"BindingError"),cn(),Ht(),vn(),Vr=r.UnboundTypeError=tt(Error,"UnboundTypeError"),Ar();var Dn={h:er,q:lt,r:Le,w:fe,p:Br,o:Nr,c:gr,v:qe,k:sr,e:ut,b:gn,a:$r,j:yn,g:bn,u:Pn,d:Tn,x:Jr,i:ar,m:Yr,l:$n,y:Er,n:Rn,f:En,t:en,s:Sn};xr(),r.___wasm_call_ctors=function(){return(r.___wasm_call_ctors=r.asm.A).apply(null,arguments)};var Mt=r._malloc=function(){return(Mt=r._malloc=r.asm.B).apply(null,arguments)},nn=r.___getTypeName=function(){return(nn=r.___getTypeName=r.asm.D).apply(null,arguments)};r.__embind_initialize_bindings=function(){return(r.__embind_initialize_bindings=r.asm.E).apply(null,arguments)};var ft=r._free=function(){return(ft=r._free=r.asm.F).apply(null,arguments)},on=r.stackSave=function(){return(on=r.stackSave=r.asm.G).apply(null,arguments)},Gt=r.stackRestore=function(){return(Gt=r.stackRestore=r.asm.H).apply(null,arguments)},kr=r.stackAlloc=function(){return(kr=r.stackAlloc=r.asm.I).apply(null,arguments)},an=r.___cxa_is_pointer_type=function(){return(an=r.___cxa_is_pointer_type=r.asm.J).apply(null,arguments)};r.ccall=Sr;var yr;Ze=function u(){yr||sn(),yr||(Ze=u)};function sn(u){if(Ut>0||(fr(),Ut>0))return;function f(){yr||(yr=!0,r.calledRun=!0,!Ae&&(wr(),W(r),r.onRuntimeInitialized&&r.onRuntimeInitialized(),Dr()))}r.setStatus?(r.setStatus("Running..."),setTimeout(function(){setTimeout(function(){r.setStatus("")},1),f()},1)):f()}if(r.preInit)for(typeof r.preInit=="function"&&(r.preInit=[r.preInit]);r.preInit.length>0;)r.preInit.pop()();return sn(),k.ready}})();d.exports=w})(di);var Qi=di.exports,Zi=qn(Qi);const eo=new URL("/cursor-dicom-viewer/assets/charlswasm_decode-484ovEoR.wasm",import.meta.url),Un={codec:void 0,decoder:void 0,decodeConfig:{}};function to(d){return typeof d=="number"?Un.codec.getExceptionMessage(d):d}function ro(d){if(Un.decodeConfig=d,Un.codec)return Promise.resolve();const y=Zi({locateFile:w=>w.endsWith(".wasm")?eo.toString():w});return new Promise((w,F)=>{y.then(k=>{Un.codec=k,Un.decoder=new k.JpegLSDecoder,w()},F)})}async function ri(d,y){try{await ro();const w=Un.decoder;w.getEncodedBuffer(d.length).set(d),w.decode();const k=w.getFrameInfo(),r=w.getInterleaveMode(),W=w.getNearLossless(),H=w.getDecodedBuffer(),M={columns:k.width,rows:k.height,bitsPerPixel:k.bitsPerSample,signed:y.signed,bytesPerPixel:y.bytesPerPixel,componentsPerPixel:k.componentCount},z=no(k,H,y.signed),B={nearLossless:W,interleaveMode:r,frameInfo:k};return{...y,pixelData:z,imageInfo:M,encodeOptions:B,...B,...M}}catch(w){throw to(w)}}function no(d,y,w){return d.bitsPerSample>8?w?new Int16Array(y.buffer,y.byteOffset,y.byteLength/2):new Uint16Array(y.buffer,y.byteOffset,y.byteLength/2):w?new Int8Array(y.buffer,y.byteOffset,y.byteLength):new Uint8Array(y.buffer,y.byteOffset,y.byteLength)}var pi={exports:{}};(function(d,y){var w=(()=>{var F=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(F=F||__filename),function(k){k=k||{};var r=typeof k<"u"?k:{},W,H;r.ready=new Promise(function(a,o){W=a,H=o});var M=Object.assign({},r),z="./this.program",B=typeof window=="object",q=typeof importScripts=="function",V=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",K="";function G(a){return r.locateFile?r.locateFile(a,K):K+a}var re,ue,ke;if(V){var le=fn,Te=fn;q?K=Te.dirname(K)+"/":K=__dirname+"/",re=(a,o)=>(a=Re(a)?new URL(a):Te.normalize(a),le.readFileSync(a,o?void 0:"utf8")),ke=a=>{var o=re(a,!0);return o.buffer||(o=new Uint8Array(o)),o},ue=(a,o,p)=>{a=Re(a)?new URL(a):Te.normalize(a),le.readFile(a,function(_,A){_?p(_):o(A.buffer)})},process.argv.length>1&&(z=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",function(a){if(!(a instanceof Fe))throw a}),process.on("unhandledRejection",function(a){throw a}),r.inspect=function(){return"[Emscripten Module object]"}}else(B||q)&&(q?K=self.location.href:typeof document<"u"&&document.currentScript&&(K=document.currentScript.src),F&&(K=F),K.indexOf("blob:")!==0?K=K.substr(0,K.replace(/[?#].*/,"").lastIndexOf("/")+1):K="",re=a=>{var o=new XMLHttpRequest;return o.open("GET",a,!1),o.send(null),o.responseText},q&&(ke=a=>{var o=new XMLHttpRequest;return o.open("GET",a,!1),o.responseType="arraybuffer",o.send(null),new Uint8Array(o.response)}),ue=(a,o,p)=>{var _=new XMLHttpRequest;_.open("GET",a,!0),_.responseType="arraybuffer",_.onload=()=>{if(_.status==200||_.status==0&&_.response){o(_.response);return}p()},_.onerror=p,_.send(null)});var _e=r.print||console.log.bind(console),ie=r.printErr||console.warn.bind(console);Object.assign(r,M),M=null,r.arguments&&r.arguments,r.thisProgram&&(z=r.thisProgram),r.quit&&r.quit;var Ae;r.wasmBinary&&(Ae=r.wasmBinary),r.noExitRuntime,typeof WebAssembly!="object"&&Je("no native wasm support detected");var be,Me=!1;function Ot(a,o){a||Je(o)}var Ge=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function yt(a,o,p){for(var _=o+p,A=o;a[A]&&!(A>=_);)++A;if(A-o>16&&a.buffer&&Ge)return Ge.decode(a.subarray(o,A));for(var x="";o<A;){var I=a[o++];if(!(I&128)){x+=String.fromCharCode(I);continue}var S=a[o++]&63;if((I&224)==192){x+=String.fromCharCode((I&31)<<6|S);continue}var n=a[o++]&63;if((I&240)==224?I=(I&15)<<12|S<<6|n:I=(I&7)<<18|S<<12|n<<6|a[o++]&63,I<65536)x+=String.fromCharCode(I);else{var i=I-65536;x+=String.fromCharCode(55296|i>>10,56320|i&1023)}}return x}function _r(a,o){return a?yt(he,a,o):""}function mr(a,o,p,_){if(!(_>0))return 0;for(var A=p,x=p+_-1,I=0;I<a.length;++I){var S=a.charCodeAt(I);if(S>=55296&&S<=57343){var n=a.charCodeAt(++I);S=65536+((S&1023)<<10)|n&1023}if(S<=127){if(p>=x)break;o[p++]=S}else if(S<=2047){if(p+1>=x)break;o[p++]=192|S>>6,o[p++]=128|S&63}else if(S<=65535){if(p+2>=x)break;o[p++]=224|S>>12,o[p++]=128|S>>6&63,o[p++]=128|S&63}else{if(p+3>=x)break;o[p++]=240|S>>18,o[p++]=128|S>>12&63,o[p++]=128|S>>6&63,o[p++]=128|S&63}}return o[p]=0,p-A}function Jt(a,o,p){return mr(a,he,o,p)}function Qe(a){for(var o=0,p=0;p<a.length;++p){var _=a.charCodeAt(p);_<=127?o++:_<=2047?o+=2:_>=55296&&_<=57343?(o+=4,++p):o+=3}return o}var ve,de,he,ge,ne,te,ce,It,Ie;function pe(a){ve=a,r.HEAP8=de=new Int8Array(a),r.HEAP16=ge=new Int16Array(a),r.HEAP32=te=new Int32Array(a),r.HEAPU8=he=new Uint8Array(a),r.HEAPU16=ne=new Uint16Array(a),r.HEAPU32=ce=new Uint32Array(a),r.HEAPF32=It=new Float32Array(a),r.HEAPF64=Ie=new Float64Array(a)}r.INITIAL_MEMORY;var Xt,Yt=[],fr=[],wr=[];function Dr(){if(r.preRun)for(typeof r.preRun=="function"&&(r.preRun=[r.preRun]);r.preRun.length;)Ur(r.preRun.shift());er(Yt)}function Or(){er(fr)}function Ir(){if(r.postRun)for(typeof r.postRun=="function"&&(r.postRun=[r.postRun]);r.postRun.length;)Ze(r.postRun.shift());er(wr)}function Ur(a){Yt.unshift(a)}function Ut(a){fr.unshift(a)}function Ze(a){wr.unshift(a)}var et=0,Kt=null;function Qt(a){et++,r.monitorRunDependencies&&r.monitorRunDependencies(et)}function Zt(a){if(et--,r.monitorRunDependencies&&r.monitorRunDependencies(et),et==0&&Kt){var o=Kt;Kt=null,o()}}function Je(a){r.onAbort&&r.onAbort(a),a="Aborted("+a+")",ie(a),Me=!0,a+=". Build with -sASSERTIONS for more info.";var o=new WebAssembly.RuntimeError(a);throw H(o),o}var _t="data:application/octet-stream;base64,";function $e(a){return a.startsWith(_t)}function Re(a){return a.startsWith("file://")}var Ce;Ce="openjpegwasm_decode.wasm",$e(Ce)||(Ce=G(Ce));function xr(a){try{if(a==Ce&&Ae)return new Uint8Array(Ae);if(ke)return ke(a);throw"both async and sync fetching of the wasm failed"}catch(o){Je(o)}}function jr(){if(!Ae&&(B||q)){if(typeof fetch=="function"&&!Re(Ce))return fetch(Ce,{credentials:"same-origin"}).then(function(a){if(!a.ok)throw"failed to load wasm binary file at '"+Ce+"'";return a.arrayBuffer()}).catch(function(){return xr(Ce)});if(ue)return new Promise(function(a,o){ue(Ce,function(p){a(new Uint8Array(p))},o)})}return Promise.resolve().then(function(){return xr(Ce)})}function Vt(){var a={a:P};function o(I,S){var n=I.exports;r.asm=n,be=r.asm.E,pe(be.buffer),Xt=r.asm.G,Ut(r.asm.F),Zt()}Qt();function p(I){o(I.instance)}function _(I){return jr().then(function(S){return WebAssembly.instantiate(S,a)}).then(function(S){return S}).then(I,function(S){ie("failed to asynchronously prepare wasm: "+S),Je(S)})}function A(){return!Ae&&typeof WebAssembly.instantiateStreaming=="function"&&!$e(Ce)&&!Re(Ce)&&!V&&typeof fetch=="function"?fetch(Ce,{credentials:"same-origin"}).then(function(I){var S=WebAssembly.instantiateStreaming(I,a);return S.then(p,function(n){return ie("wasm streaming compile failed: "+n),ie("falling back to ArrayBuffer instantiation"),_(p)})}):_(p)}if(r.instantiateWasm)try{var x=r.instantiateWasm(a,o);return x}catch(I){ie("Module.instantiateWasm callback failed with error: "+I),H(I)}return A().catch(H),{}}function Fe(a){this.name="ExitStatus",this.message="Program terminated with exit("+a+")",this.status=a}function er(a){for(;a.length>0;)a.shift()(r)}function cr(a){this.excPtr=a,this.ptr=a-24,this.set_type=function(o){ce[this.ptr+4>>2]=o},this.get_type=function(){return ce[this.ptr+4>>2]},this.set_destructor=function(o){ce[this.ptr+8>>2]=o},this.get_destructor=function(){return ce[this.ptr+8>>2]},this.set_refcount=function(o){te[this.ptr>>2]=o},this.set_caught=function(o){o=o?1:0,de[this.ptr+12>>0]=o},this.get_caught=function(){return de[this.ptr+12>>0]!=0},this.set_rethrown=function(o){o=o?1:0,de[this.ptr+13>>0]=o},this.get_rethrown=function(){return de[this.ptr+13>>0]!=0},this.init=function(o,p){this.set_adjusted_ptr(0),this.set_type(o),this.set_destructor(p),this.set_refcount(0),this.set_caught(!1),this.set_rethrown(!1)},this.add_ref=function(){var o=te[this.ptr>>2];te[this.ptr>>2]=o+1},this.release_ref=function(){var o=te[this.ptr>>2];return te[this.ptr>>2]=o-1,o===1},this.set_adjusted_ptr=function(o){ce[this.ptr+16>>2]=o},this.get_adjusted_ptr=function(){return ce[this.ptr+16>>2]},this.get_exception_ptr=function(){var o=J(this.get_type());if(o)return ce[this.excPtr>>2];var p=this.get_adjusted_ptr();return p!==0?p:this.excPtr}}function Wr(a,o,p){var _=new cr(a);throw _.init(o,p),a}var Ue={};function Xe(a){for(;a.length;){var o=a.pop(),p=a.pop();p(o)}}function ye(a){return this.fromWireType(te[a>>2])}var mt={},ct={},Rt={},xt=48,Et=57;function tt(a){if(a===void 0)return"_unknown";a=a.replace(/[^a-zA-Z0-9_]/g,"$");var o=a.charCodeAt(0);return o>=xt&&o<=Et?"_"+a:a}function jt(a,o){return a=tt(a),new Function("body","return function "+a+`() {
    "use strict";    return body.apply(this, arguments);
};
`)(o)}function wt(a,o){var p=jt(o,function(_){this.name=o,this.message=_;var A=new Error(_).stack;A!==void 0&&(this.stack=this.toString()+`
`+A.replace(/^Error(:[^\n]*)?\n/,""))});return p.prototype=Object.create(a.prototype),p.prototype.constructor=p,p.prototype.toString=function(){return this.message===void 0?this.name:this.name+": "+this.message},p}var bt=void 0;function lt(a){throw new bt(a)}function Le(a,o,p){a.forEach(function(S){Rt[S]=o});function _(S){var n=p(S);n.length!==a.length&&lt("Mismatched type converter count");for(var i=0;i<a.length;++i)Ve(a[i],n[i])}var A=new Array(o.length),x=[],I=0;o.forEach((S,n)=>{ct.hasOwnProperty(S)?A[n]=ct[S]:(x.push(S),mt.hasOwnProperty(S)||(mt[S]=[]),mt[S].push(()=>{A[n]=ct[S],++I,I===x.length&&_(A)}))}),x.length===0&&_(A)}function rt(a){var o=Ue[a];delete Ue[a];var p=o.rawConstructor,_=o.rawDestructor,A=o.fields,x=A.map(I=>I.getterReturnType).concat(A.map(I=>I.setterArgumentType));Le([a],x,I=>{var S={};return A.forEach((n,i)=>{var c=n.fieldName,h=I[i],m=n.getter,t=n.getterContext,e=I[i+A.length],s=n.setter,l=n.setterContext;S[c]={read:g=>h.fromWireType(m(t,g)),write:(g,b)=>{var C=[];s(l,g,e.toWireType(C,b)),Xe(C)}}}),[{name:o.name,fromWireType:function(n){var i={};for(var c in S)i[c]=S[c].read(n);return _(n),i},toWireType:function(n,i){for(var c in S)if(!(c in i))throw new TypeError('Missing field:  "'+c+'"');var h=p();for(c in S)S[c].write(h,i[c]);return n!==null&&n.push(_,h),h},argPackAdvance:8,readValueFromPointer:ye,destructorFunction:_}]})}function tr(a,o,p,_,A){}function Wt(a){switch(a){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+a)}}function me(){for(var a=new Array(256),o=0;o<256;++o)a[o]=String.fromCharCode(o);Pt=a}var Pt=void 0;function Q(a){for(var o="",p=a;he[p];)o+=Pt[he[p++]];return o}var Ee=void 0;function fe(a){throw new Ee(a)}function Ve(a,o,p={}){if(!("argPackAdvance"in o))throw new TypeError("registerType registeredInstance requires argPackAdvance");var _=o.name;if(a||fe('type "'+_+'" must have a positive integer typeid pointer'),ct.hasOwnProperty(a)){if(p.ignoreDuplicateRegistrations)return;fe("Cannot register type '"+_+"' twice")}if(ct[a]=o,delete Rt[a],mt.hasOwnProperty(a)){var A=mt[a];delete mt[a],A.forEach(x=>x())}}function we(a,o,p,_,A){var x=Wt(p);o=Q(o),Ve(a,{name:o,fromWireType:function(I){return!!I},toWireType:function(I,S){return S?_:A},argPackAdvance:8,readValueFromPointer:function(I){var S;if(p===1)S=de;else if(p===2)S=ge;else if(p===4)S=te;else throw new TypeError("Unknown boolean type size: "+o);return this.fromWireType(S[I>>x])},destructorFunction:null})}function St(a){if(!(this instanceof At)||!(a instanceof At))return!1;for(var o=this.$$.ptrType.registeredClass,p=this.$$.ptr,_=a.$$.ptrType.registeredClass,A=a.$$.ptr;o.baseClass;)p=o.upcast(p),o=o.baseClass;for(;_.baseClass;)A=_.upcast(A),_=_.baseClass;return o===_&&p===A}function se(a){return{count:a.count,deleteScheduled:a.deleteScheduled,preservePointerOnDelete:a.preservePointerOnDelete,ptr:a.ptr,ptrType:a.ptrType,smartPtr:a.smartPtr,smartPtrType:a.smartPtrType}}function je(a){function o(p){return p.$$.ptrType.registeredClass.name}fe(o(a)+" instance already deleted")}var br=!1;function lr(a){}function De(a){a.smartPtr?a.smartPtrType.rawDestructor(a.smartPtr):a.ptrType.registeredClass.rawDestructor(a.ptr)}function dt(a){a.count.value-=1;var o=a.count.value===0;o&&De(a)}function oe(a,o,p){if(o===p)return a;if(p.baseClass===void 0)return null;var _=oe(a,o,p.baseClass);return _===null?null:p.downcast(_)}var nt={};function rr(){return Object.keys(kt).length}function dr(){var a=[];for(var o in kt)kt.hasOwnProperty(o)&&a.push(kt[o]);return a}var pt=[];function Bt(){for(;pt.length;){var a=pt.pop();a.$$.deleteScheduled=!1,a.delete()}}var Ht=void 0;function Nt(a){Ht=a,pt.length&&Ht&&Ht(Bt)}function nr(){r.getInheritedInstanceCount=rr,r.getLiveInheritedInstances=dr,r.flushPendingDeletes=Bt,r.setDelayFunction=Nt}var kt={};function Tt(a,o){for(o===void 0&&fe("ptr should not be undefined");a.baseClass;)o=a.upcast(o),a=a.baseClass;return o}function Hr(a,o){return o=Tt(a,o),kt[o]}function Ft(a,o){(!o.ptrType||!o.ptr)&&lt("makeClassHandle requires ptr and ptrType");var p=!!o.smartPtrType,_=!!o.smartPtr;return p!==_&&lt("Both smartPtrType and smartPtr must be specified"),o.count={value:1},Ct(Object.create(a,{$$:{value:o}}))}function ir(a){var o=this.getPointee(a);if(!o)return this.destructor(a),null;var p=Hr(this.registeredClass,o);if(p!==void 0){if(p.$$.count.value===0)return p.$$.ptr=o,p.$$.smartPtr=a,p.clone();var _=p.clone();return this.destructor(a),_}function A(){return this.isSmartPointer?Ft(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:o,smartPtrType:this,smartPtr:a}):Ft(this.registeredClass.instancePrototype,{ptrType:this,ptr:a})}var x=this.registeredClass.getActualType(o),I=nt[x];if(!I)return A.call(this);var S;this.isConst?S=I.constPointerType:S=I.pointerType;var n=oe(o,this.registeredClass,S.registeredClass);return n===null?A.call(this):this.isSmartPointer?Ft(S.registeredClass.instancePrototype,{ptrType:S,ptr:n,smartPtrType:this,smartPtr:a}):Ft(S.registeredClass.instancePrototype,{ptrType:S,ptr:n})}function Ct(a){return typeof FinalizationRegistry>"u"?(Ct=o=>o,a):(br=new FinalizationRegistry(o=>{dt(o.$$)}),Ct=o=>{var p=o.$$,_=!!p.smartPtr;if(_){var A={$$:p};br.register(o,A,o)}return o},lr=o=>br.unregister(o),Ct(a))}function Pr(){if(this.$$.ptr||je(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var a=Ct(Object.create(Object.getPrototypeOf(this),{$$:{value:se(this.$$)}}));return a.$$.count.value+=1,a.$$.deleteScheduled=!1,a}function Dt(){this.$$.ptr||je(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&fe("Object already scheduled for deletion"),lr(this),dt(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)}function cn(){return!this.$$.ptr}function Ye(){return this.$$.ptr||je(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&fe("Object already scheduled for deletion"),pt.push(this),pt.length===1&&Ht&&Ht(Bt),this.$$.deleteScheduled=!0,this}function zt(){At.prototype.isAliasOf=St,At.prototype.clone=Pr,At.prototype.delete=Dt,At.prototype.isDeleted=cn,At.prototype.deleteLater=Ye}function At(){}function Mr(a,o,p){if(a[o].overloadTable===void 0){var _=a[o];a[o]=function(){return a[o].overloadTable.hasOwnProperty(arguments.length)||fe("Function '"+p+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+a[o].overloadTable+")!"),a[o].overloadTable[arguments.length].apply(this,arguments)},a[o].overloadTable=[],a[o].overloadTable[_.argCount]=_}}function qt(a,o,p){r.hasOwnProperty(a)?(fe("Cannot register public name '"+a+"' twice"),Mr(r,a,a),r.hasOwnProperty(p)&&fe("Cannot register multiple overloads of a function with the same number of arguments ("+p+")!"),r[a].overloadTable[p]=o):r[a]=o}function ln(a,o,p,_,A,x,I,S){this.name=a,this.constructor=o,this.instancePrototype=p,this.rawDestructor=_,this.baseClass=A,this.getActualType=x,this.upcast=I,this.downcast=S,this.pureVirtualFunctions=[]}function We(a,o,p){for(;o!==p;)o.upcast||fe("Expected null or instance of "+p.name+", got an instance of "+o.name),a=o.upcast(a),o=o.baseClass;return a}function Lr(a,o){if(o===null)return this.isReference&&fe("null is not a valid "+this.name),0;o.$$||fe('Cannot pass "'+sr(o)+'" as a '+this.name),o.$$.ptr||fe("Cannot pass deleted object as a pointer of type "+this.name);var p=o.$$.ptrType.registeredClass,_=We(o.$$.ptr,p,this.registeredClass);return _}function dn(a,o){var p;if(o===null)return this.isReference&&fe("null is not a valid "+this.name),this.isSmartPointer?(p=this.rawConstructor(),a!==null&&a.push(this.rawDestructor,p),p):0;o.$$||fe('Cannot pass "'+sr(o)+'" as a '+this.name),o.$$.ptr||fe("Cannot pass deleted object as a pointer of type "+this.name),!this.isConst&&o.$$.ptrType.isConst&&fe("Cannot convert argument of type "+(o.$$.smartPtrType?o.$$.smartPtrType.name:o.$$.ptrType.name)+" to parameter type "+this.name);var _=o.$$.ptrType.registeredClass;if(p=We(o.$$.ptr,_,this.registeredClass),this.isSmartPointer)switch(o.$$.smartPtr===void 0&&fe("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:o.$$.smartPtrType===this?p=o.$$.smartPtr:fe("Cannot convert argument of type "+(o.$$.smartPtrType?o.$$.smartPtrType.name:o.$$.ptrType.name)+" to parameter type "+this.name);break;case 1:p=o.$$.smartPtr;break;case 2:if(o.$$.smartPtrType===this)p=o.$$.smartPtr;else{var A=o.clone();p=this.rawShare(p,st.toHandle(function(){A.delete()})),a!==null&&a.push(this.rawDestructor,p)}break;default:fe("Unsupporting sharing policy")}return p}function pn(a,o){if(o===null)return this.isReference&&fe("null is not a valid "+this.name),0;o.$$||fe('Cannot pass "'+sr(o)+'" as a '+this.name),o.$$.ptr||fe("Cannot pass deleted object as a pointer of type "+this.name),o.$$.ptrType.isConst&&fe("Cannot convert argument of type "+o.$$.ptrType.name+" to parameter type "+this.name);var p=o.$$.ptrType.registeredClass,_=We(o.$$.ptr,p,this.registeredClass);return _}function Tr(a){return this.rawGetPointee&&(a=this.rawGetPointee(a)),a}function vn(a){this.rawDestructor&&this.rawDestructor(a)}function Oe(a){a!==null&&a.delete()}function Cr(){vt.prototype.getPointee=Tr,vt.prototype.destructor=vn,vt.prototype.argPackAdvance=8,vt.prototype.readValueFromPointer=ye,vt.prototype.deleteObject=Oe,vt.prototype.fromWireType=ir}function vt(a,o,p,_,A,x,I,S,n,i,c){this.name=a,this.registeredClass=o,this.isReference=p,this.isConst=_,this.isSmartPointer=A,this.pointeeType=x,this.sharingPolicy=I,this.rawGetPointee=S,this.rawConstructor=n,this.rawShare=i,this.rawDestructor=c,!A&&o.baseClass===void 0?_?(this.toWireType=Lr,this.destructorFunction=null):(this.toWireType=pn,this.destructorFunction=null):this.toWireType=dn}function pr(a,o,p){r.hasOwnProperty(a)||lt("Replacing nonexistant public symbol"),r[a].overloadTable!==void 0&&p!==void 0?r[a].overloadTable[p]=o:(r[a]=o,r[a].argCount=p)}function vr(a,o,p){var _=r["dynCall_"+a];return p&&p.length?_.apply(null,[o].concat(p)):_.call(null,o)}var hr=[];function ht(a){var o=hr[a];return o||(a>=hr.length&&(hr.length=a+1),hr[a]=o=Xt.get(a)),o}function it(a,o,p){if(a.includes("j"))return vr(a,o,p);var _=ht(o).apply(null,p);return _}function Vr(a,o){var p=[];return function(){return p.length=0,Object.assign(p,arguments),it(a,o,p)}}function He(a,o){a=Q(a);function p(){return a.includes("j")?Vr(a,o):ht(o)}var _=p();return typeof _!="function"&&fe("unknown function pointer with signature "+a+": "+o),_}var ot=void 0;function Br(a){var o=O(a),p=Q(o);return D(o),p}function Be(a,o){var p=[],_={};function A(x){if(!_[x]&&!ct[x]){if(Rt[x]){Rt[x].forEach(A);return}p.push(x),_[x]=!0}}throw o.forEach(A),new ot(a+": "+p.map(Br).join([", "]))}function at(a,o,p,_,A,x,I,S,n,i,c,h,m){c=Q(c),x=He(A,x),S&&(S=He(I,S)),i&&(i=He(n,i)),m=He(h,m);var t=tt(c);qt(t,function(){Be("Cannot construct "+c+" due to unbound types",[_])}),Le([a,o,p],_?[_]:[],function(e){e=e[0];var s,l;_?(s=e.registeredClass,l=s.instancePrototype):l=At.prototype;var g=jt(t,function(){if(Object.getPrototypeOf(this)!==b)throw new Ee("Use 'new' to construct "+c);if(C.constructor_body===void 0)throw new Ee(c+" has no accessible constructor");var N=C.constructor_body[arguments.length];if(N===void 0)throw new Ee("Tried to invoke ctor of "+c+" with invalid number of parameters ("+arguments.length+") - expected ("+Object.keys(C.constructor_body).toString()+") parameters instead!");return N.apply(this,arguments)}),b=Object.create(l,{constructor:{value:g}});g.prototype=b;var C=new ln(c,g,b,m,s,x,S,i),T=new vt(c,C,!0,!1,!1),E=new vt(c+"*",C,!1,!1,!1),j=new vt(c+" const*",C,!1,!0,!1);return nt[a]={pointerType:E,constPointerType:j},pr(t,g),[T,E,j]})}function or(a,o){for(var p=[],_=0;_<a;_++)p.push(ce[o+_*4>>2]);return p}function Nr(a,o){if(!(a instanceof Function))throw new TypeError("new_ called with constructor type "+typeof a+" which is not a function");var p=jt(a.name||"unknownFunctionName",function(){});p.prototype=a.prototype;var _=new p,A=a.apply(_,o);return A instanceof Object?A:_}function gr(a,o,p,_,A){var x=o.length;x<2&&fe("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var I=o[1]!==null&&p!==null,S=!1,n=1;n<o.length;++n)if(o[n]!==null&&o[n].destructorFunction===void 0){S=!0;break}for(var i=o[0].name!=="void",c="",h="",n=0;n<x-2;++n)c+=(n!==0?", ":"")+"arg"+n,h+=(n!==0?", ":"")+"arg"+n+"Wired";var m="return function "+tt(a)+"("+c+`) {
if (arguments.length !== `+(x-2)+`) {
throwBindingError('function `+a+" called with ' + arguments.length + ' arguments, expected "+(x-2)+` args!');
}
`;S&&(m+=`var destructors = [];
`);var t=S?"destructors":"null",e=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],s=[fe,_,A,Xe,o[0],o[1]];I&&(m+="var thisWired = classParam.toWireType("+t+`, this);
`);for(var n=0;n<x-2;++n)m+="var arg"+n+"Wired = argType"+n+".toWireType("+t+", arg"+n+"); // "+o[n+2].name+`
`,e.push("argType"+n),s.push(o[n+2]);if(I&&(h="thisWired"+(h.length>0?", ":"")+h),m+=(i?"var rv = ":"")+"invoker(fn"+(h.length>0?", ":"")+h+`);
`,S)m+=`runDestructors(destructors);
`;else for(var n=I?1:2;n<o.length;++n){var l=n===1?"thisWired":"arg"+(n-2)+"Wired";o[n].destructorFunction!==null&&(m+=l+"_dtor("+l+"); // "+o[n].name+`
`,e.push(l+"_dtor"),s.push(o[n].destructorFunction))}i&&(m+=`var ret = retType.fromWireType(rv);
return ret;
`),m+=`}
`,e.push(m);var g=Nr(Function,e).apply(null,s);return g}function Ne(a,o,p,_,A,x){Ot(o>0);var I=or(o,p);A=He(_,A),Le([],[a],function(S){S=S[0];var n="constructor "+S.name;if(S.registeredClass.constructor_body===void 0&&(S.registeredClass.constructor_body=[]),S.registeredClass.constructor_body[o-1]!==void 0)throw new Ee("Cannot register multiple constructors with identical number of parameters ("+(o-1)+") for class '"+S.name+"'! Overload resolution is currently only performed using the parameter count, not actual type info!");return S.registeredClass.constructor_body[o-1]=()=>{Be("Cannot construct "+S.name+" due to unbound types",I)},Le([],I,function(i){return i.splice(1,0,null),S.registeredClass.constructor_body[o-1]=gr(n,i,null,A,x),[]}),[]})}function ze(a,o,p,_,A,x,I,S){var n=or(p,_);o=Q(o),x=He(A,x),Le([],[a],function(i){i=i[0];var c=i.name+"."+o;o.startsWith("@@")&&(o=Symbol[o.substring(2)]),S&&i.registeredClass.pureVirtualFunctions.push(o);function h(){Be("Cannot call "+c+" due to unbound types",n)}var m=i.registeredClass.instancePrototype,t=m[o];return t===void 0||t.overloadTable===void 0&&t.className!==i.name&&t.argCount===p-2?(h.argCount=p-2,h.className=i.name,m[o]=h):(Mr(m,o,c),m[o].overloadTable[p-2]=h),Le([],n,function(e){var s=gr(c,e,i,x,I);return m[o].overloadTable===void 0?(s.argCount=p-2,m[o]=s):m[o].overloadTable[p-2]=s,[]}),[]})}var ar=[],xe=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function zr(a){a>4&&--xe[a].refcount===0&&(xe[a]=void 0,ar.push(a))}function Ar(){for(var a=0,o=5;o<xe.length;++o)xe[o]!==void 0&&++a;return a}function gt(){for(var a=5;a<xe.length;++a)if(xe[a]!==void 0)return xe[a];return null}function qe(){r.count_emval_handles=Ar,r.get_first_emval=gt}var st={toValue:a=>(a||fe("Cannot use deleted val. handle = "+a),xe[a].value),toHandle:a=>{switch(a){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:{var o=ar.length?ar.pop():xe.length;return xe[o]={refcount:1,value:a},o}}}};function hn(a,o){o=Q(o),Ve(a,{name:o,fromWireType:function(p){var _=st.toValue(p);return zr(p),_},toWireType:function(p,_){return st.toHandle(_)},argPackAdvance:8,readValueFromPointer:ye,destructorFunction:null})}function sr(a){if(a===null)return"null";var o=typeof a;return o==="object"||o==="array"||o==="function"?a.toString():""+a}function ut(a,o){switch(o){case 2:return function(p){return this.fromWireType(It[p>>2])};case 3:return function(p){return this.fromWireType(Ie[p>>3])};default:throw new TypeError("Unknown float type: "+a)}}function $t(a,o,p){var _=Wt(p);o=Q(o),Ve(a,{name:o,fromWireType:function(A){return A},toWireType:function(A,x){return x},argPackAdvance:8,readValueFromPointer:ut(o,_),destructorFunction:null})}function gn(a,o,p){switch(o){case 0:return p?function(A){return de[A]}:function(A){return he[A]};case 1:return p?function(A){return ge[A>>1]}:function(A){return ne[A>>1]};case 2:return p?function(A){return te[A>>2]}:function(A){return ce[A>>2]};default:throw new TypeError("Unknown integer type: "+a)}}function $r(a,o,p,_,A){o=Q(o);var x=Wt(p),I=h=>h;if(_===0){var S=32-8*p;I=h=>h<<S>>>S}var n=o.includes("unsigned"),i=(h,m)=>{},c;n?c=function(h,m){return i(m,this.name),m>>>0}:c=function(h,m){return i(m,this.name),m},Ve(a,{name:o,fromWireType:I,toWireType:c,argPackAdvance:8,readValueFromPointer:gn(o,x,_!==0),destructorFunction:null})}function yn(a,o,p){var _=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],A=_[o];function x(I){I=I>>2;var S=ce,n=S[I],i=S[I+1];return new A(ve,i,n)}p=Q(p),Ve(a,{name:p,fromWireType:x,argPackAdvance:8,readValueFromPointer:x},{ignoreDuplicateRegistrations:!0})}function ur(a,o){o=Q(o);var p=o==="std::string";Ve(a,{name:o,fromWireType:function(_){var A=ce[_>>2],x=_+4,I;if(p)for(var S=x,n=0;n<=A;++n){var i=x+n;if(n==A||he[i]==0){var c=i-S,h=_r(S,c);I===void 0?I=h:(I+="\0",I+=h),S=i+1}}else{for(var m=new Array(A),n=0;n<A;++n)m[n]=String.fromCharCode(he[x+n]);I=m.join("")}return D(_),I},toWireType:function(_,A){A instanceof ArrayBuffer&&(A=new Uint8Array(A));var x,I=typeof A=="string";I||A instanceof Uint8Array||A instanceof Uint8ClampedArray||A instanceof Int8Array||fe("Cannot pass non-string to std::string"),p&&I?x=Qe(A):x=A.length;var S=$(4+x+1),n=S+4;if(ce[S>>2]=x,p&&I)Jt(A,n,x+1);else if(I)for(var i=0;i<x;++i){var c=A.charCodeAt(i);c>255&&(D(n),fe("String has UTF-16 code units that do not fit in 8 bits")),he[n+i]=c}else for(var i=0;i<x;++i)he[n+i]=A[i];return _!==null&&_.push(D,S),S},argPackAdvance:8,readValueFromPointer:ye,destructorFunction:function(_){D(_)}})}var qr=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0;function Rr(a,o){for(var p=a,_=p>>1,A=_+o/2;!(_>=A)&&ne[_];)++_;if(p=_<<1,p-a>32&&qr)return qr.decode(he.subarray(a,p));for(var x="",I=0;!(I>=o/2);++I){var S=ge[a+I*2>>1];if(S==0)break;x+=String.fromCharCode(S)}return x}function _n(a,o,p){if(p===void 0&&(p=2147483647),p<2)return 0;p-=2;for(var _=o,A=p<a.length*2?p/2:a.length,x=0;x<A;++x){var I=a.charCodeAt(x);ge[o>>1]=I,o+=2}return ge[o>>1]=0,o-_}function mn(a){return a.length*2}function Gr(a,o){for(var p=0,_="";!(p>=o/4);){var A=te[a+p*4>>2];if(A==0)break;if(++p,A>=65536){var x=A-65536;_+=String.fromCharCode(55296|x>>10,56320|x&1023)}else _+=String.fromCharCode(A)}return _}function wn(a,o,p){if(p===void 0&&(p=2147483647),p<4)return 0;for(var _=o,A=_+p-4,x=0;x<a.length;++x){var I=a.charCodeAt(x);if(I>=55296&&I<=57343){var S=a.charCodeAt(++x);I=65536+((I&1023)<<10)|S&1023}if(te[o>>2]=I,o+=4,o+4>A)break}return te[o>>2]=0,o-_}function bn(a){for(var o=0,p=0;p<a.length;++p){var _=a.charCodeAt(p);_>=55296&&_<=57343&&++p,o+=4}return o}function Pn(a,o,p){p=Q(p);var _,A,x,I,S;o===2?(_=Rr,A=_n,I=mn,x=()=>ne,S=1):o===4&&(_=Gr,A=wn,I=bn,x=()=>ce,S=2),Ve(a,{name:p,fromWireType:function(n){for(var i=ce[n>>2],c=x(),h,m=n+4,t=0;t<=i;++t){var e=n+4+t*o;if(t==i||c[e>>S]==0){var s=e-m,l=_(m,s);h===void 0?h=l:(h+="\0",h+=l),m=e+o}}return D(n),h},toWireType:function(n,i){typeof i!="string"&&fe("Cannot pass non-string to C++ string type "+p);var c=I(i),h=$(4+c+o);return ce[h>>2]=c>>S,A(i,h+4,c+o),n!==null&&n.push(D,h),h},argPackAdvance:8,readValueFromPointer:ye,destructorFunction:function(n){D(n)}})}function Tn(a,o,p,_,A,x){Ue[a]={name:Q(o),rawConstructor:He(p,_),rawDestructor:He(A,x),fields:[]}}function Jr(a,o,p,_,A,x,I,S,n,i){Ue[a].fields.push({fieldName:Q(o),getterReturnType:p,getter:He(_,A),getterContext:x,setterArgumentType:I,setter:He(S,n),setterContext:i})}function Cn(a,o){o=Q(o),Ve(a,{isVoid:!0,name:o,argPackAdvance:0,fromWireType:function(){},toWireType:function(p,_){}})}var An={};function Xr(a){var o=An[a];return o===void 0?Q(a):o}function Yr(){return typeof globalThis=="object"?globalThis:function(){return Function}()("return this")()}function $n(a){return a===0?st.toHandle(Yr()):(a=Xr(a),st.toHandle(Yr()[a]))}function Kr(a){a>4&&(xe[a].refcount+=1)}function Qr(a,o){var p=ct[a];return p===void 0&&fe(o+" has unknown type "+Br(a)),p}function Zr(a){for(var o="",p=0;p<a;++p)o+=(p!==0?", ":"")+"arg"+p;for(var _=()=>ce,A="return function emval_allocator_"+a+`(constructor, argTypes, args) {
  var HEAPU32 = getMemory();
`,p=0;p<a;++p)A+="var argType"+p+" = requireRegisteredType(HEAPU32[((argTypes)>>2)], 'parameter "+p+`');
var arg`+p+" = argType"+p+`.readValueFromPointer(args);
args += argType`+p+`['argPackAdvance'];
argTypes += 4;
`;return A+="var obj = new constructor("+o+`);
return valueToHandle(obj);
}
`,new Function("requireRegisteredType","Module","valueToHandle","getMemory",A)(Qr,r,st.toHandle,_)}var Er={};function Rn(a,o,p,_){a=st.toValue(a);var A=Er[o];return A||(A=Zr(o),Er[o]=A),A(a,p,_)}function En(a,o){a=Qr(a,"_emval_take_value");var p=a.readValueFromPointer(o);return st.toHandle(p)}function en(){Je("")}function tn(){return 2147483648}function rn(){return tn()}function Sn(a,o,p){he.copyWithin(a,o,o+p)}function kn(a){try{return be.grow(a-ve.byteLength+65535>>>16),pe(be.buffer),1}catch{}}function Fn(a){var o=he.length;a=a>>>0;var p=tn();if(a>p)return!1;let _=(n,i)=>n+(i-n%i)%i;for(var A=1;A<=4;A*=2){var x=o*(1+.2/A);x=Math.min(x,a+100663296);var I=Math.min(p,_(Math.max(a,x),65536)),S=kn(I);if(S)return!0}return!1}var Sr={};function Dn(){return z||"./this.program"}function Mt(){if(!Mt.strings){var a=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",o={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:a,_:Dn()};for(var p in Sr)Sr[p]===void 0?delete o[p]:o[p]=Sr[p];var _=[];for(var p in o)_.push(p+"="+o[p]);Mt.strings=_}return Mt.strings}function nn(a,o,p){for(var _=0;_<a.length;++_)de[o++>>0]=a.charCodeAt(_);de[o>>0]=0}function ft(a,o){var p=0;return Mt().forEach(function(_,A){var x=o+p;ce[a+A*4>>2]=x,nn(_,x),p+=_.length+1}),0}function on(a,o){var p=Mt();ce[a>>2]=p.length;var _=0;return p.forEach(function(A){_+=A.length+1}),ce[o>>2]=_,0}function Gt(a){return 52}function kr(a,o,p,_,A){return 70}var an=[null,[],[]];function yr(a,o){var p=an[a];o===0||o===10?((a===1?_e:ie)(yt(p,0)),p.length=0):p.push(o)}function sn(a,o,p,_){for(var A=0,x=0;x<p;x++){var I=ce[o>>2],S=ce[o+4>>2];o+=8;for(var n=0;n<S;n++)yr(a,he[I+n]);A+=S}return ce[_>>2]=A,0}function u(a){var o=r["_"+a];return o}function f(a,o){de.set(a,o)}function v(a,o,p,_,A){var x={string:e=>{var s=0;if(e!=null&&e!==0){var l=(e.length<<2)+1;s=L(l),Jt(e,s,l)}return s},array:e=>{var s=L(e.length);return f(e,s),s}};function I(e){return o==="string"?_r(e):o==="boolean"?!!e:e}var S=u(a),n=[],i=0;if(_)for(var c=0;c<_.length;c++){var h=x[p[c]];h?(i===0&&(i=R()),n[c]=h(_[c])):n[c]=_[c]}var m=S.apply(null,n);function t(e){return i!==0&&U(i),I(e)}return m=t(m),m}bt=r.InternalError=wt(Error,"InternalError"),me(),Ee=r.BindingError=wt(Error,"BindingError"),zt(),nr(),Cr(),ot=r.UnboundTypeError=wt(Error,"UnboundTypeError"),qe();var P={D:Wr,e:rt,t:tr,B:we,r:at,q:Ne,b:ze,A:hn,l:$t,d:$r,a:yn,k:ur,f:Pn,g:Tn,c:Jr,C:Cn,h:zr,o:$n,m:Kr,n:Rn,p:En,i:en,v:rn,z:Sn,u:Fn,w:ft,x:on,y:Gt,s:kr,j:sn};Vt(),r.___wasm_call_ctors=function(){return(r.___wasm_call_ctors=r.asm.F).apply(null,arguments)};var $=r._malloc=function(){return($=r._malloc=r.asm.H).apply(null,arguments)},D=r._free=function(){return(D=r._free=r.asm.I).apply(null,arguments)},O=r.___getTypeName=function(){return(O=r.___getTypeName=r.asm.J).apply(null,arguments)};r.__embind_initialize_bindings=function(){return(r.__embind_initialize_bindings=r.asm.K).apply(null,arguments)};var R=r.stackSave=function(){return(R=r.stackSave=r.asm.L).apply(null,arguments)},U=r.stackRestore=function(){return(U=r.stackRestore=r.asm.M).apply(null,arguments)},L=r.stackAlloc=function(){return(L=r.stackAlloc=r.asm.N).apply(null,arguments)},J=r.___cxa_is_pointer_type=function(){return(J=r.___cxa_is_pointer_type=r.asm.O).apply(null,arguments)};r.dynCall_iji=function(){return(r.dynCall_iji=r.asm.P).apply(null,arguments)},r.dynCall_jji=function(){return(r.dynCall_jji=r.asm.Q).apply(null,arguments)},r.dynCall_iiji=function(){return(r.dynCall_iiji=r.asm.R).apply(null,arguments)},r.dynCall_jiji=function(){return(r.dynCall_jiji=r.asm.S).apply(null,arguments)},r.ccall=v;var Z;Kt=function a(){Z||Y(),Z||(Kt=a)};function Y(a){if(et>0||(Dr(),et>0))return;function o(){Z||(Z=!0,r.calledRun=!0,!Me&&(Or(),W(r),r.onRuntimeInitialized&&r.onRuntimeInitialized(),Ir()))}r.setStatus?(r.setStatus("Running..."),setTimeout(function(){setTimeout(function(){r.setStatus("")},1),o()},1)):o()}if(r.preInit)for(typeof r.preInit=="function"&&(r.preInit=[r.preInit]);r.preInit.length>0;)r.preInit.pop()();return Y(),k.ready}})();d.exports=w})(pi);var io=pi.exports,oo=qn(io);const ao=new URL("/cursor-dicom-viewer/assets/openjpegwasm_decode-C4nnCcr6.wasm",import.meta.url),xn={codec:void 0,decoder:void 0,decodeConfig:{}};function so(d){if(xn.decodeConfig=d,xn.codec)return Promise.resolve();const y=oo({locateFile:w=>w.endsWith(".wasm")?ao.toString():w});return new Promise((w,F)=>{y.then(k=>{xn.codec=k,xn.decoder=new k.J2KDecoder,w()},F)})}async function ni(d,y){await so();const w=xn.decoder,F=w.getEncodedBuffer(d.length);F.set(d),w.decode();const k=w.getFrameInfo(),r=w.getDecodedBuffer();new Uint8Array(r.length).set(r);const H=`x: ${w.getImageOffset().x}, y: ${w.getImageOffset().y}`,M=w.getNumDecompositions(),z=w.getNumLayers(),B=["unknown","LRCP","RLCP","RPCL","PCRL","CPRL"][w.getProgressionOrder()+1],q=w.getIsReversible(),V=`${w.getBlockDimensions().width} x ${w.getBlockDimensions().height}`,K=`${w.getTileSize().width} x ${w.getTileSize().height}`,G=`${w.getTileOffset().x}, ${w.getTileOffset().y}`,re=w.getColorSpace(),ue=`${r.length.toLocaleString()} bytes`,ke=`${(r.length/F.length).toFixed(2)}:1`,le={columns:k.width,rows:k.height,bitsPerPixel:k.bitsPerSample,signed:k.isSigned,bytesPerPixel:y.bytesPerPixel,componentsPerPixel:k.componentCount},Te=uo(k,r),_e={imageOffset:H,numDecompositions:M,numLayers:z,progessionOrder:B,reversible:q,blockDimensions:V,tileSize:K,tileOffset:G,colorTransform:re,decodedSize:ue,compressionRatio:ke};return{...y,pixelData:Te,imageInfo:le,encodeOptions:_e,..._e,...le}}function uo(d,y){return d.bitsPerSample>8?d.isSigned?new Int16Array(y.buffer,y.byteOffset,y.byteLength/2):new Uint16Array(y.buffer,y.byteOffset,y.byteLength/2):d.isSigned?new Int8Array(y.buffer,y.byteOffset,y.byteLength):new Uint8Array(y.buffer,y.byteOffset,y.byteLength)}var vi={exports:{}};(function(d,y){var w=(()=>{var F=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(F=F||__filename),function(r){r=r||{};var r=typeof r<"u"?r:{},W,H;r.ready=new Promise(function(n,i){W=n,H=i});var M=Object.assign({},r),z=typeof window=="object",B=typeof importScripts=="function",q=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",V="";function K(n){return r.locateFile?r.locateFile(n,V):V+n}var G,re,ue;if(q){var ke=fn,le=fn;B?V=le.dirname(V)+"/":V=__dirname+"/",G=(n,i)=>(n=$e(n)?new URL(n):le.normalize(n),ke.readFileSync(n,i?void 0:"utf8")),ue=n=>{var i=G(n,!0);return i.buffer||(i=new Uint8Array(i)),i},re=(n,i,c)=>{n=$e(n)?new URL(n):le.normalize(n),ke.readFile(n,function(h,m){h?c(h):i(m.buffer)})},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),process.on("uncaughtException",function(n){if(!(n instanceof Vt))throw n}),process.on("unhandledRejection",function(n){throw n}),r.inspect=function(){return"[Emscripten Module object]"}}else(z||B)&&(B?V=self.location.href:typeof document<"u"&&document.currentScript&&(V=document.currentScript.src),F&&(V=F),V.indexOf("blob:")!==0?V=V.substr(0,V.replace(/[?#].*/,"").lastIndexOf("/")+1):V="",G=n=>{var i=new XMLHttpRequest;return i.open("GET",n,!1),i.send(null),i.responseText},B&&(ue=n=>{var i=new XMLHttpRequest;return i.open("GET",n,!1),i.responseType="arraybuffer",i.send(null),new Uint8Array(i.response)}),re=(n,i,c)=>{var h=new XMLHttpRequest;h.open("GET",n,!0),h.responseType="arraybuffer",h.onload=()=>{if(h.status==200||h.status==0&&h.response){i(h.response);return}c()},h.onerror=c,h.send(null)});var Te=r.print||console.log.bind(console),_e=r.printErr||console.warn.bind(console);Object.assign(r,M),M=null,r.arguments&&r.arguments,r.thisProgram&&r.thisProgram,r.quit&&r.quit;var ie;r.wasmBinary&&(ie=r.wasmBinary),r.noExitRuntime,typeof WebAssembly!="object"&&Zt("no native wasm support detected");var Ae,be=!1;function Me(n,i){n||Zt(i)}var Ot=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function Ge(n,i,c){for(var h=i+c,m=i;n[m]&&!(m>=h);)++m;if(m-i>16&&n.buffer&&Ot)return Ot.decode(n.subarray(i,m));for(var t="";i<m;){var e=n[i++];if(!(e&128)){t+=String.fromCharCode(e);continue}var s=n[i++]&63;if((e&224)==192){t+=String.fromCharCode((e&31)<<6|s);continue}var l=n[i++]&63;if((e&240)==224?e=(e&15)<<12|s<<6|l:e=(e&7)<<18|s<<12|l<<6|n[i++]&63,e<65536)t+=String.fromCharCode(e);else{var g=e-65536;t+=String.fromCharCode(55296|g>>10,56320|g&1023)}}return t}function yt(n,i){return n?Ge(de,n,i):""}function _r(n,i,c,h){if(!(h>0))return 0;for(var m=c,t=c+h-1,e=0;e<n.length;++e){var s=n.charCodeAt(e);if(s>=55296&&s<=57343){var l=n.charCodeAt(++e);s=65536+((s&1023)<<10)|l&1023}if(s<=127){if(c>=t)break;i[c++]=s}else if(s<=2047){if(c+1>=t)break;i[c++]=192|s>>6,i[c++]=128|s&63}else if(s<=65535){if(c+2>=t)break;i[c++]=224|s>>12,i[c++]=128|s>>6&63,i[c++]=128|s&63}else{if(c+3>=t)break;i[c++]=240|s>>18,i[c++]=128|s>>12&63,i[c++]=128|s>>6&63,i[c++]=128|s&63}}return i[c]=0,c-m}function mr(n,i,c){return _r(n,de,i,c)}function Jt(n){for(var i=0,c=0;c<n.length;++c){var h=n.charCodeAt(c);h<=127?i++:h<=2047?i+=2:h>=55296&&h<=57343?(i+=4,++c):i+=3}return i}var Qe,ve,de,he,ge,ne,te,ce,It;function Ie(n){Qe=n,r.HEAP8=ve=new Int8Array(n),r.HEAP16=he=new Int16Array(n),r.HEAP32=ne=new Int32Array(n),r.HEAPU8=de=new Uint8Array(n),r.HEAPU16=ge=new Uint16Array(n),r.HEAPU32=te=new Uint32Array(n),r.HEAPF32=ce=new Float32Array(n),r.HEAPF64=It=new Float64Array(n)}r.INITIAL_MEMORY;var pe,Xt=[],Yt=[],fr=[];function wr(){if(r.preRun)for(typeof r.preRun=="function"&&(r.preRun=[r.preRun]);r.preRun.length;)Ir(r.preRun.shift());Fe(Xt)}function Dr(){Fe(Yt)}function Or(){if(r.postRun)for(typeof r.postRun=="function"&&(r.postRun=[r.postRun]);r.postRun.length;)Ut(r.postRun.shift());Fe(fr)}function Ir(n){Xt.unshift(n)}function Ur(n){Yt.unshift(n)}function Ut(n){fr.unshift(n)}var Ze=0,et=null;function Kt(n){Ze++,r.monitorRunDependencies&&r.monitorRunDependencies(Ze)}function Qt(n){if(Ze--,r.monitorRunDependencies&&r.monitorRunDependencies(Ze),Ze==0&&et){var i=et;et=null,i()}}function Zt(n){r.onAbort&&r.onAbort(n),n="Aborted("+n+")",_e(n),be=!0,n+=". Build with -sASSERTIONS for more info.";var i=new WebAssembly.RuntimeError(n);throw H(i),i}var Je="data:application/octet-stream;base64,";function _t(n){return n.startsWith(Je)}function $e(n){return n.startsWith("file://")}var Re;Re="openjphjs.wasm",_t(Re)||(Re=K(Re));function Ce(n){try{if(n==Re&&ie)return new Uint8Array(ie);if(ue)return ue(n);throw"both async and sync fetching of the wasm failed"}catch(i){Zt(i)}}function xr(){if(!ie&&(z||B)){if(typeof fetch=="function"&&!$e(Re))return fetch(Re,{credentials:"same-origin"}).then(function(n){if(!n.ok)throw"failed to load wasm binary file at '"+Re+"'";return n.arrayBuffer()}).catch(function(){return Ce(Re)});if(re)return new Promise(function(n,i){re(Re,function(c){n(new Uint8Array(c))},i)})}return Promise.resolve().then(function(){return Ce(Re)})}function jr(){var n={a:sn};function i(e,s){var l=e.exports;r.asm=l,Ae=r.asm.P,Ie(Ae.buffer),pe=r.asm.T,Ur(r.asm.Q),Qt()}Kt();function c(e){i(e.instance)}function h(e){return xr().then(function(s){return WebAssembly.instantiate(s,n)}).then(function(s){return s}).then(e,function(s){_e("failed to asynchronously prepare wasm: "+s),Zt(s)})}function m(){return!ie&&typeof WebAssembly.instantiateStreaming=="function"&&!_t(Re)&&!$e(Re)&&!q&&typeof fetch=="function"?fetch(Re,{credentials:"same-origin"}).then(function(e){var s=WebAssembly.instantiateStreaming(e,n);return s.then(c,function(l){return _e("wasm streaming compile failed: "+l),_e("falling back to ArrayBuffer instantiation"),h(c)})}):h(c)}if(r.instantiateWasm)try{var t=r.instantiateWasm(n,i);return t}catch(e){_e("Module.instantiateWasm callback failed with error: "+e),H(e)}return m().catch(H),{}}function Vt(n){this.name="ExitStatus",this.message="Program terminated with exit("+n+")",this.status=n}function Fe(n){for(;n.length>0;)n.shift()(r)}var er=[];function cr(n){n.add_ref()}function Wr(n){var i=new Rt(n);return i.get_caught()||i.set_caught(!0),i.set_rethrown(!1),er.push(i),cr(i),i.get_exception_ptr()}var Ue=0,Xe=[];function ye(n){var i=Xe[n];return i||(n>=Xe.length&&(Xe.length=n+1),Xe[n]=i=pe.get(n)),i}function mt(n){if(n.release_ref()&&!n.get_rethrown()){var i=n.get_destructor();i&&ye(i)(n.excPtr),f(n.excPtr)}}function ct(){_setThrew(0);var n=er.pop();mt(n),Ue=0}function Rt(n){this.excPtr=n,this.ptr=n-24,this.set_type=function(i){te[this.ptr+4>>2]=i},this.get_type=function(){return te[this.ptr+4>>2]},this.set_destructor=function(i){te[this.ptr+8>>2]=i},this.get_destructor=function(){return te[this.ptr+8>>2]},this.set_refcount=function(i){ne[this.ptr>>2]=i},this.set_caught=function(i){i=i?1:0,ve[this.ptr+12>>0]=i},this.get_caught=function(){return ve[this.ptr+12>>0]!=0},this.set_rethrown=function(i){i=i?1:0,ve[this.ptr+13>>0]=i},this.get_rethrown=function(){return ve[this.ptr+13>>0]!=0},this.init=function(i,c){this.set_adjusted_ptr(0),this.set_type(i),this.set_destructor(c),this.set_refcount(0),this.set_caught(!1),this.set_rethrown(!1)},this.add_ref=function(){var i=ne[this.ptr>>2];ne[this.ptr>>2]=i+1},this.release_ref=function(){var i=ne[this.ptr>>2];return ne[this.ptr>>2]=i-1,i===1},this.set_adjusted_ptr=function(i){te[this.ptr+16>>2]=i},this.get_adjusted_ptr=function(){return te[this.ptr+16>>2]},this.get_exception_ptr=function(){var i=L(this.get_type());if(i)return te[this.excPtr>>2];var c=this.get_adjusted_ptr();return c!==0?c:this.excPtr}}function xt(n){throw Ue||(Ue=n),n}function Et(){var n=Ue;if(!n)return $(0),0;var i=new Rt(n);i.set_adjusted_ptr(n);var c=i.get_type();if(!c)return $(0),n;for(var h=0;h<arguments.length;h++){var m=arguments[h];if(m===0||m===c)break;var t=i.ptr+16;if(U(m,c,t))return $(m),n}return $(c),n}function tt(){var n=Ue;if(!n)return $(0),0;var i=new Rt(n);i.set_adjusted_ptr(n);var c=i.get_type();if(!c)return $(0),n;for(var h=0;h<arguments.length;h++){var m=arguments[h];if(m===0||m===c)break;var t=i.ptr+16;if(U(m,c,t))return $(m),n}return $(c),n}function jt(n,i,c){var h=new Rt(n);throw h.init(i,c),Ue=n,n}var wt={};function bt(n){for(;n.length;){var i=n.pop(),c=n.pop();c(i)}}function lt(n){return this.fromWireType(ne[n>>2])}var Le={},rt={},tr={},Wt=48,me=57;function Pt(n){if(n===void 0)return"_unknown";n=n.replace(/[^a-zA-Z0-9_]/g,"$");var i=n.charCodeAt(0);return i>=Wt&&i<=me?"_"+n:n}function Q(n,i){return n=Pt(n),new Function("body","return function "+n+`() {
    "use strict";    return body.apply(this, arguments);
};
`)(i)}function Ee(n,i){var c=Q(i,function(h){this.name=i,this.message=h;var m=new Error(h).stack;m!==void 0&&(this.stack=this.toString()+`
`+m.replace(/^Error(:[^\n]*)?\n/,""))});return c.prototype=Object.create(n.prototype),c.prototype.constructor=c,c.prototype.toString=function(){return this.message===void 0?this.name:this.name+": "+this.message},c}var fe=void 0;function Ve(n){throw new fe(n)}function we(n,i,c){n.forEach(function(s){tr[s]=i});function h(s){var l=c(s);l.length!==n.length&&Ve("Mismatched type converter count");for(var g=0;g<n.length;++g)nt(n[g],l[g])}var m=new Array(i.length),t=[],e=0;i.forEach((s,l)=>{rt.hasOwnProperty(s)?m[l]=rt[s]:(t.push(s),Le.hasOwnProperty(s)||(Le[s]=[]),Le[s].push(()=>{m[l]=rt[s],++e,e===t.length&&h(m)}))}),t.length===0&&h(m)}function St(n){var i=wt[n];delete wt[n];var c=i.rawConstructor,h=i.rawDestructor,m=i.fields,t=m.map(e=>e.getterReturnType).concat(m.map(e=>e.setterArgumentType));we([n],t,e=>{var s={};return m.forEach((l,g)=>{var b=l.fieldName,C=e[g],T=l.getter,E=l.getterContext,j=e[g+m.length],N=l.setter,X=l.setterContext;s[b]={read:ee=>C.fromWireType(T(E,ee)),write:(ee,Pe)=>{var ae=[];N(X,ee,j.toWireType(ae,Pe)),bt(ae)}}}),[{name:i.name,fromWireType:function(l){var g={};for(var b in s)g[b]=s[b].read(l);return h(l),g},toWireType:function(l,g){for(var b in s)if(!(b in g))throw new TypeError('Missing field:  "'+b+'"');var C=c();for(b in s)s[b].write(C,g[b]);return l!==null&&l.push(h,C),C},argPackAdvance:8,readValueFromPointer:lt,destructorFunction:h}]})}function se(n,i,c,h,m){}function je(n){switch(n){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+n)}}function br(){for(var n=new Array(256),i=0;i<256;++i)n[i]=String.fromCharCode(i);lr=n}var lr=void 0;function De(n){for(var i="",c=n;de[c];)i+=lr[de[c++]];return i}var dt=void 0;function oe(n){throw new dt(n)}function nt(n,i,c={}){if(!("argPackAdvance"in i))throw new TypeError("registerType registeredInstance requires argPackAdvance");var h=i.name;if(n||oe('type "'+h+'" must have a positive integer typeid pointer'),rt.hasOwnProperty(n)){if(c.ignoreDuplicateRegistrations)return;oe("Cannot register type '"+h+"' twice")}if(rt[n]=i,delete tr[n],Le.hasOwnProperty(n)){var m=Le[n];delete Le[n],m.forEach(t=>t())}}function rr(n,i,c,h,m){var t=je(c);i=De(i),nt(n,{name:i,fromWireType:function(e){return!!e},toWireType:function(e,s){return s?h:m},argPackAdvance:8,readValueFromPointer:function(e){var s;if(c===1)s=ve;else if(c===2)s=he;else if(c===4)s=ne;else throw new TypeError("Unknown boolean type size: "+i);return this.fromWireType(s[e>>t])},destructorFunction:null})}function dr(n){if(!(this instanceof Oe)||!(n instanceof Oe))return!1;for(var i=this.$$.ptrType.registeredClass,c=this.$$.ptr,h=n.$$.ptrType.registeredClass,m=n.$$.ptr;i.baseClass;)c=i.upcast(c),i=i.baseClass;for(;h.baseClass;)m=h.upcast(m),h=h.baseClass;return i===h&&c===m}function pt(n){return{count:n.count,deleteScheduled:n.deleteScheduled,preservePointerOnDelete:n.preservePointerOnDelete,ptr:n.ptr,ptrType:n.ptrType,smartPtr:n.smartPtr,smartPtrType:n.smartPtrType}}function Bt(n){function i(c){return c.$$.ptrType.registeredClass.name}oe(i(n)+" instance already deleted")}var Ht=!1;function Nt(n){}function nr(n){n.smartPtr?n.smartPtrType.rawDestructor(n.smartPtr):n.ptrType.registeredClass.rawDestructor(n.ptr)}function kt(n){n.count.value-=1;var i=n.count.value===0;i&&nr(n)}function Tt(n,i,c){if(i===c)return n;if(c.baseClass===void 0)return null;var h=Tt(n,i,c.baseClass);return h===null?null:c.downcast(h)}var Hr={};function Ft(){return Object.keys(zt).length}function ir(){var n=[];for(var i in zt)zt.hasOwnProperty(i)&&n.push(zt[i]);return n}var Ct=[];function Pr(){for(;Ct.length;){var n=Ct.pop();n.$$.deleteScheduled=!1,n.delete()}}var Dt=void 0;function cn(n){Dt=n,Ct.length&&Dt&&Dt(Pr)}function Ye(){r.getInheritedInstanceCount=Ft,r.getLiveInheritedInstances=ir,r.flushPendingDeletes=Pr,r.setDelayFunction=cn}var zt={};function At(n,i){for(i===void 0&&oe("ptr should not be undefined");n.baseClass;)i=n.upcast(i),n=n.baseClass;return i}function Mr(n,i){return i=At(n,i),zt[i]}function qt(n,i){(!i.ptrType||!i.ptr)&&Ve("makeClassHandle requires ptr and ptrType");var c=!!i.smartPtrType,h=!!i.smartPtr;return c!==h&&Ve("Both smartPtrType and smartPtr must be specified"),i.count={value:1},We(Object.create(n,{$$:{value:i}}))}function ln(n){var i=this.getPointee(n);if(!i)return this.destructor(n),null;var c=Mr(this.registeredClass,i);if(c!==void 0){if(c.$$.count.value===0)return c.$$.ptr=i,c.$$.smartPtr=n,c.clone();var h=c.clone();return this.destructor(n),h}function m(){return this.isSmartPointer?qt(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:i,smartPtrType:this,smartPtr:n}):qt(this.registeredClass.instancePrototype,{ptrType:this,ptr:n})}var t=this.registeredClass.getActualType(i),e=Hr[t];if(!e)return m.call(this);var s;this.isConst?s=e.constPointerType:s=e.pointerType;var l=Tt(i,this.registeredClass,s.registeredClass);return l===null?m.call(this):this.isSmartPointer?qt(s.registeredClass.instancePrototype,{ptrType:s,ptr:l,smartPtrType:this,smartPtr:n}):qt(s.registeredClass.instancePrototype,{ptrType:s,ptr:l})}function We(n){return typeof FinalizationRegistry>"u"?(We=i=>i,n):(Ht=new FinalizationRegistry(i=>{kt(i.$$)}),We=i=>{var c=i.$$,h=!!c.smartPtr;if(h){var m={$$:c};Ht.register(i,m,i)}return i},Nt=i=>Ht.unregister(i),We(n))}function Lr(){if(this.$$.ptr||Bt(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var n=We(Object.create(Object.getPrototypeOf(this),{$$:{value:pt(this.$$)}}));return n.$$.count.value+=1,n.$$.deleteScheduled=!1,n}function dn(){this.$$.ptr||Bt(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&oe("Object already scheduled for deletion"),Nt(this),kt(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)}function pn(){return!this.$$.ptr}function Tr(){return this.$$.ptr||Bt(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&oe("Object already scheduled for deletion"),Ct.push(this),Ct.length===1&&Dt&&Dt(Pr),this.$$.deleteScheduled=!0,this}function vn(){Oe.prototype.isAliasOf=dr,Oe.prototype.clone=Lr,Oe.prototype.delete=dn,Oe.prototype.isDeleted=pn,Oe.prototype.deleteLater=Tr}function Oe(){}function Cr(n,i,c){if(n[i].overloadTable===void 0){var h=n[i];n[i]=function(){return n[i].overloadTable.hasOwnProperty(arguments.length)||oe("Function '"+c+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+n[i].overloadTable+")!"),n[i].overloadTable[arguments.length].apply(this,arguments)},n[i].overloadTable=[],n[i].overloadTable[h.argCount]=h}}function vt(n,i,c){r.hasOwnProperty(n)?((c===void 0||r[n].overloadTable!==void 0&&r[n].overloadTable[c]!==void 0)&&oe("Cannot register public name '"+n+"' twice"),Cr(r,n,n),r.hasOwnProperty(c)&&oe("Cannot register multiple overloads of a function with the same number of arguments ("+c+")!"),r[n].overloadTable[c]=i):(r[n]=i,c!==void 0&&(r[n].numArguments=c))}function pr(n,i,c,h,m,t,e,s){this.name=n,this.constructor=i,this.instancePrototype=c,this.rawDestructor=h,this.baseClass=m,this.getActualType=t,this.upcast=e,this.downcast=s,this.pureVirtualFunctions=[]}function vr(n,i,c){for(;i!==c;)i.upcast||oe("Expected null or instance of "+c.name+", got an instance of "+i.name),n=i.upcast(n),i=i.baseClass;return n}function hr(n,i){if(i===null)return this.isReference&&oe("null is not a valid "+this.name),0;i.$$||oe('Cannot pass "'+Rr(i)+'" as a '+this.name),i.$$.ptr||oe("Cannot pass deleted object as a pointer of type "+this.name);var c=i.$$.ptrType.registeredClass,h=vr(i.$$.ptr,c,this.registeredClass);return h}function ht(n,i){var c;if(i===null)return this.isReference&&oe("null is not a valid "+this.name),this.isSmartPointer?(c=this.rawConstructor(),n!==null&&n.push(this.rawDestructor,c),c):0;i.$$||oe('Cannot pass "'+Rr(i)+'" as a '+this.name),i.$$.ptr||oe("Cannot pass deleted object as a pointer of type "+this.name),!this.isConst&&i.$$.ptrType.isConst&&oe("Cannot convert argument of type "+(i.$$.smartPtrType?i.$$.smartPtrType.name:i.$$.ptrType.name)+" to parameter type "+this.name);var h=i.$$.ptrType.registeredClass;if(c=vr(i.$$.ptr,h,this.registeredClass),this.isSmartPointer)switch(i.$$.smartPtr===void 0&&oe("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:i.$$.smartPtrType===this?c=i.$$.smartPtr:oe("Cannot convert argument of type "+(i.$$.smartPtrType?i.$$.smartPtrType.name:i.$$.ptrType.name)+" to parameter type "+this.name);break;case 1:c=i.$$.smartPtr;break;case 2:if(i.$$.smartPtrType===this)c=i.$$.smartPtr;else{var m=i.clone();c=this.rawShare(c,ur.toHandle(function(){m.delete()})),n!==null&&n.push(this.rawDestructor,c)}break;default:oe("Unsupporting sharing policy")}return c}function it(n,i){if(i===null)return this.isReference&&oe("null is not a valid "+this.name),0;i.$$||oe('Cannot pass "'+Rr(i)+'" as a '+this.name),i.$$.ptr||oe("Cannot pass deleted object as a pointer of type "+this.name),i.$$.ptrType.isConst&&oe("Cannot convert argument of type "+i.$$.ptrType.name+" to parameter type "+this.name);var c=i.$$.ptrType.registeredClass,h=vr(i.$$.ptr,c,this.registeredClass);return h}function Vr(n){return this.rawGetPointee&&(n=this.rawGetPointee(n)),n}function He(n){this.rawDestructor&&this.rawDestructor(n)}function ot(n){n!==null&&n.delete()}function Br(){Be.prototype.getPointee=Vr,Be.prototype.destructor=He,Be.prototype.argPackAdvance=8,Be.prototype.readValueFromPointer=lt,Be.prototype.deleteObject=ot,Be.prototype.fromWireType=ln}function Be(n,i,c,h,m,t,e,s,l,g,b){this.name=n,this.registeredClass=i,this.isReference=c,this.isConst=h,this.isSmartPointer=m,this.pointeeType=t,this.sharingPolicy=e,this.rawGetPointee=s,this.rawConstructor=l,this.rawShare=g,this.rawDestructor=b,!m&&i.baseClass===void 0?h?(this.toWireType=hr,this.destructorFunction=null):(this.toWireType=it,this.destructorFunction=null):this.toWireType=ht}function at(n,i,c){r.hasOwnProperty(n)||Ve("Replacing nonexistant public symbol"),r[n].overloadTable!==void 0&&c!==void 0?r[n].overloadTable[c]=i:(r[n]=i,r[n].argCount=c)}function or(n,i,c){var h=r["dynCall_"+n];return c&&c.length?h.apply(null,[i].concat(c)):h.call(null,i)}function Nr(n,i,c){if(n.includes("j"))return or(n,i,c);var h=ye(i).apply(null,c);return h}function gr(n,i){var c=[];return function(){return c.length=0,Object.assign(c,arguments),Nr(n,i,c)}}function Ne(n,i){n=De(n);function c(){return n.includes("j")?gr(n,i):ye(i)}var h=c();return typeof h!="function"&&oe("unknown function pointer with signature "+n+": "+i),h}var ze=void 0;function ar(n){var i=P(n),c=De(i);return v(i),c}function xe(n,i){var c=[],h={};function m(t){if(!h[t]&&!rt[t]){if(tr[t]){tr[t].forEach(m);return}c.push(t),h[t]=!0}}throw i.forEach(m),new ze(n+": "+c.map(ar).join([", "]))}function zr(n,i,c,h,m,t,e,s,l,g,b,C,T){b=De(b),t=Ne(m,t),s&&(s=Ne(e,s)),g&&(g=Ne(l,g)),T=Ne(C,T);var E=Pt(b);vt(E,function(){xe("Cannot construct "+b+" due to unbound types",[h])}),we([n,i,c],h?[h]:[],function(j){j=j[0];var N,X;h?(N=j.registeredClass,X=N.instancePrototype):X=Oe.prototype;var ee=Q(E,function(){if(Object.getPrototypeOf(this)!==Pe)throw new dt("Use 'new' to construct "+b);if(ae.constructor_body===void 0)throw new dt(b+" has no accessible constructor");var un=ae.constructor_body[arguments.length];if(un===void 0)throw new dt("Tried to invoke ctor of "+b+" with invalid number of parameters ("+arguments.length+") - expected ("+Object.keys(ae.constructor_body).toString()+") parameters instead!");return un.apply(this,arguments)}),Pe=Object.create(X,{constructor:{value:ee}});ee.prototype=Pe;var ae=new pr(b,ee,Pe,T,N,t,s,g),Se=new Be(b,ae,!0,!1,!1),Ke=new Be(b+"*",ae,!1,!1,!1),Lt=new Be(b+" const*",ae,!1,!0,!1);return Hr[n]={pointerType:Ke,constPointerType:Lt},at(E,ee),[Se,Ke,Lt]})}function Ar(n,i){for(var c=[],h=0;h<n;h++)c.push(te[i+h*4>>2]);return c}function gt(n,i){if(!(n instanceof Function))throw new TypeError("new_ called with constructor type "+typeof n+" which is not a function");var c=Q(n.name||"unknownFunctionName",function(){});c.prototype=n.prototype;var h=new c,m=n.apply(h,i);return m instanceof Object?m:h}function qe(n,i,c,h,m){var t=i.length;t<2&&oe("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var e=i[1]!==null&&c!==null,s=!1,l=1;l<i.length;++l)if(i[l]!==null&&i[l].destructorFunction===void 0){s=!0;break}for(var g=i[0].name!=="void",b="",C="",l=0;l<t-2;++l)b+=(l!==0?", ":"")+"arg"+l,C+=(l!==0?", ":"")+"arg"+l+"Wired";var T="return function "+Pt(n)+"("+b+`) {
if (arguments.length !== `+(t-2)+`) {
throwBindingError('function `+n+" called with ' + arguments.length + ' arguments, expected "+(t-2)+` args!');
}
`;s&&(T+=`var destructors = [];
`);var E=s?"destructors":"null",j=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],N=[oe,h,m,bt,i[0],i[1]];e&&(T+="var thisWired = classParam.toWireType("+E+`, this);
`);for(var l=0;l<t-2;++l)T+="var arg"+l+"Wired = argType"+l+".toWireType("+E+", arg"+l+"); // "+i[l+2].name+`
`,j.push("argType"+l),N.push(i[l+2]);if(e&&(C="thisWired"+(C.length>0?", ":"")+C),T+=(g?"var rv = ":"")+"invoker(fn"+(C.length>0?", ":"")+C+`);
`,s)T+=`runDestructors(destructors);
`;else for(var l=e?1:2;l<i.length;++l){var X=l===1?"thisWired":"arg"+(l-2)+"Wired";i[l].destructorFunction!==null&&(T+=X+"_dtor("+X+"); // "+i[l].name+`
`,j.push(X+"_dtor"),N.push(i[l].destructorFunction))}g&&(T+=`var ret = retType.fromWireType(rv);
return ret;
`),T+=`}
`,j.push(T);var ee=gt(Function,j).apply(null,N);return ee}function st(n,i,c,h,m,t){Me(i>0);var e=Ar(i,c);m=Ne(h,m),we([],[n],function(s){s=s[0];var l="constructor "+s.name;if(s.registeredClass.constructor_body===void 0&&(s.registeredClass.constructor_body=[]),s.registeredClass.constructor_body[i-1]!==void 0)throw new dt("Cannot register multiple constructors with identical number of parameters ("+(i-1)+") for class '"+s.name+"'! Overload resolution is currently only performed using the parameter count, not actual type info!");return s.registeredClass.constructor_body[i-1]=()=>{xe("Cannot construct "+s.name+" due to unbound types",e)},we([],e,function(g){return g.splice(1,0,null),s.registeredClass.constructor_body[i-1]=qe(l,g,null,m,t),[]}),[]})}function hn(n,i,c,h,m,t,e,s){var l=Ar(c,h);i=De(i),t=Ne(m,t),we([],[n],function(g){g=g[0];var b=g.name+"."+i;i.startsWith("@@")&&(i=Symbol[i.substring(2)]),s&&g.registeredClass.pureVirtualFunctions.push(i);function C(){xe("Cannot call "+b+" due to unbound types",l)}var T=g.registeredClass.instancePrototype,E=T[i];return E===void 0||E.overloadTable===void 0&&E.className!==g.name&&E.argCount===c-2?(C.argCount=c-2,C.className=g.name,T[i]=C):(Cr(T,i,b),T[i].overloadTable[c-2]=C),we([],l,function(j){var N=qe(b,j,g,t,e);return T[i].overloadTable===void 0?(N.argCount=c-2,T[i]=N):T[i].overloadTable[c-2]=N,[]}),[]})}var sr=[],ut=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function $t(n){n>4&&--ut[n].refcount===0&&(ut[n]=void 0,sr.push(n))}function gn(){for(var n=0,i=5;i<ut.length;++i)ut[i]!==void 0&&++n;return n}function $r(){for(var n=5;n<ut.length;++n)if(ut[n]!==void 0)return ut[n];return null}function yn(){r.count_emval_handles=gn,r.get_first_emval=$r}var ur={toValue:n=>(n||oe("Cannot use deleted val. handle = "+n),ut[n].value),toHandle:n=>{switch(n){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:{var i=sr.length?sr.pop():ut.length;return ut[i]={refcount:1,value:n},i}}}};function qr(n,i){i=De(i),nt(n,{name:i,fromWireType:function(c){var h=ur.toValue(c);return $t(c),h},toWireType:function(c,h){return ur.toHandle(h)},argPackAdvance:8,readValueFromPointer:lt,destructorFunction:null})}function Rr(n){if(n===null)return"null";var i=typeof n;return i==="object"||i==="array"||i==="function"?n.toString():""+n}function _n(n,i){switch(i){case 2:return function(c){return this.fromWireType(ce[c>>2])};case 3:return function(c){return this.fromWireType(It[c>>3])};default:throw new TypeError("Unknown float type: "+n)}}function mn(n,i,c){var h=je(c);i=De(i),nt(n,{name:i,fromWireType:function(m){return m},toWireType:function(m,t){return t},argPackAdvance:8,readValueFromPointer:_n(i,h),destructorFunction:null})}function Gr(n,i,c,h,m,t){var e=Ar(i,c);n=De(n),m=Ne(h,m),vt(n,function(){xe("Cannot call "+n+" due to unbound types",e)},i-1),we([],e,function(s){var l=[s[0],null].concat(s.slice(1));return at(n,qe(n,l,null,m,t),i-1),[]})}function wn(n,i,c){switch(i){case 0:return c?function(m){return ve[m]}:function(m){return de[m]};case 1:return c?function(m){return he[m>>1]}:function(m){return ge[m>>1]};case 2:return c?function(m){return ne[m>>2]}:function(m){return te[m>>2]};default:throw new TypeError("Unknown integer type: "+n)}}function bn(n,i,c,h,m){i=De(i);var t=je(c),e=C=>C;if(h===0){var s=32-8*c;e=C=>C<<s>>>s}var l=i.includes("unsigned"),g=(C,T)=>{},b;l?b=function(C,T){return g(T,this.name),T>>>0}:b=function(C,T){return g(T,this.name),T},nt(n,{name:i,fromWireType:e,toWireType:b,argPackAdvance:8,readValueFromPointer:wn(i,t,h!==0),destructorFunction:null})}function Pn(n,i,c){var h=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],m=h[i];function t(e){e=e>>2;var s=te,l=s[e],g=s[e+1];return new m(Qe,g,l)}c=De(c),nt(n,{name:c,fromWireType:t,argPackAdvance:8,readValueFromPointer:t},{ignoreDuplicateRegistrations:!0})}function Tn(n,i){i=De(i);var c=i==="std::string";nt(n,{name:i,fromWireType:function(h){var m=te[h>>2],t=h+4,e;if(c)for(var s=t,l=0;l<=m;++l){var g=t+l;if(l==m||de[g]==0){var b=g-s,C=yt(s,b);e===void 0?e=C:(e+="\0",e+=C),s=g+1}}else{for(var T=new Array(m),l=0;l<m;++l)T[l]=String.fromCharCode(de[t+l]);e=T.join("")}return v(h),e},toWireType:function(h,m){m instanceof ArrayBuffer&&(m=new Uint8Array(m));var t,e=typeof m=="string";e||m instanceof Uint8Array||m instanceof Uint8ClampedArray||m instanceof Int8Array||oe("Cannot pass non-string to std::string"),c&&e?t=Jt(m):t=m.length;var s=u(4+t+1),l=s+4;if(te[s>>2]=t,c&&e)mr(m,l,t+1);else if(e)for(var g=0;g<t;++g){var b=m.charCodeAt(g);b>255&&(v(l),oe("String has UTF-16 code units that do not fit in 8 bits")),de[l+g]=b}else for(var g=0;g<t;++g)de[l+g]=m[g];return h!==null&&h.push(v,s),s},argPackAdvance:8,readValueFromPointer:lt,destructorFunction:function(h){v(h)}})}var Jr=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0;function Cn(n,i){for(var c=n,h=c>>1,m=h+i/2;!(h>=m)&&ge[h];)++h;if(c=h<<1,c-n>32&&Jr)return Jr.decode(de.subarray(n,c));for(var t="",e=0;!(e>=i/2);++e){var s=he[n+e*2>>1];if(s==0)break;t+=String.fromCharCode(s)}return t}function An(n,i,c){if(c===void 0&&(c=2147483647),c<2)return 0;c-=2;for(var h=i,m=c<n.length*2?c/2:n.length,t=0;t<m;++t){var e=n.charCodeAt(t);he[i>>1]=e,i+=2}return he[i>>1]=0,i-h}function Xr(n){return n.length*2}function Yr(n,i){for(var c=0,h="";!(c>=i/4);){var m=ne[n+c*4>>2];if(m==0)break;if(++c,m>=65536){var t=m-65536;h+=String.fromCharCode(55296|t>>10,56320|t&1023)}else h+=String.fromCharCode(m)}return h}function $n(n,i,c){if(c===void 0&&(c=2147483647),c<4)return 0;for(var h=i,m=h+c-4,t=0;t<n.length;++t){var e=n.charCodeAt(t);if(e>=55296&&e<=57343){var s=n.charCodeAt(++t);e=65536+((e&1023)<<10)|s&1023}if(ne[i>>2]=e,i+=4,i+4>m)break}return ne[i>>2]=0,i-h}function Kr(n){for(var i=0,c=0;c<n.length;++c){var h=n.charCodeAt(c);h>=55296&&h<=57343&&++c,i+=4}return i}function Qr(n,i,c){c=De(c);var h,m,t,e,s;i===2?(h=Cn,m=An,e=Xr,t=()=>ge,s=1):i===4&&(h=Yr,m=$n,e=Kr,t=()=>te,s=2),nt(n,{name:c,fromWireType:function(l){for(var g=te[l>>2],b=t(),C,T=l+4,E=0;E<=g;++E){var j=l+4+E*i;if(E==g||b[j>>s]==0){var N=j-T,X=h(T,N);C===void 0?C=X:(C+="\0",C+=X),T=j+i}}return v(l),C},toWireType:function(l,g){typeof g!="string"&&oe("Cannot pass non-string to C++ string type "+c);var b=e(g),C=u(4+b+i);return te[C>>2]=b>>s,m(g,C+4,b+i),l!==null&&l.push(v,C),C},argPackAdvance:8,readValueFromPointer:lt,destructorFunction:function(l){v(l)}})}function Zr(n,i,c,h,m,t){wt[n]={name:De(i),rawConstructor:Ne(c,h),rawDestructor:Ne(m,t),fields:[]}}function Er(n,i,c,h,m,t,e,s,l,g){wt[n].fields.push({fieldName:De(i),getterReturnType:c,getter:Ne(h,m),getterContext:t,setterArgumentType:e,setter:Ne(s,l),setterContext:g})}function Rn(n,i){i=De(i),nt(n,{isVoid:!0,name:i,argPackAdvance:0,fromWireType:function(){},toWireType:function(c,h){}})}function En(n){n>4&&(ut[n].refcount+=1)}function en(n,i){var c=rt[n];return c===void 0&&oe(i+" has unknown type "+ar(n)),c}function tn(n,i){n=en(n,"_emval_take_value");var c=n.readValueFromPointer(i);return ur.toHandle(c)}function rn(){Zt("")}function Sn(n,i,c){de.copyWithin(n,i,i+c)}function kn(){return 2147483648}function Fn(n){try{return Ae.grow(n-Qe.byteLength+65535>>>16),Ie(Ae.buffer),1}catch{}}function Sr(n){var i=de.length;n=n>>>0;var c=kn();if(n>c)return!1;let h=(l,g)=>l+(g-l%g)%g;for(var m=1;m<=4;m*=2){var t=i*(1+.2/m);t=Math.min(t,n+100663296);var e=Math.min(c,h(Math.max(n,t),65536)),s=Fn(e);if(s)return!0}return!1}function Dn(n){return 52}function Mt(n,i,c,h,m){return 70}var nn=[null,[],[]];function ft(n,i){var c=nn[n];i===0||i===10?((n===1?Te:_e)(Ge(c,0)),c.length=0):c.push(i)}function on(n,i,c,h){for(var m=0,t=0;t<c;t++){var e=te[i>>2],s=te[i+4>>2];i+=8;for(var l=0;l<s;l++)ft(n,de[e+l]);m+=s}return te[h>>2]=m,0}function Gt(n){return n}function kr(n){var i=r["_"+n];return i}function an(n,i){ve.set(n,i)}function yr(n,i,c,h,m){var t={string:j=>{var N=0;if(j!=null&&j!==0){var X=(j.length<<2)+1;N=R(X),mr(j,N,X)}return N},array:j=>{var N=R(j.length);return an(j,N),N}};function e(j){return i==="string"?yt(j):i==="boolean"?!!j:j}var s=kr(n),l=[],g=0;if(h)for(var b=0;b<h.length;b++){var C=t[c[b]];C?(g===0&&(g=D()),l[b]=C(h[b])):l[b]=h[b]}var T=s.apply(null,l);function E(j){return g!==0&&O(g),e(j)}return T=E(T),T}fe=r.InternalError=Ee(Error,"InternalError"),br(),dt=r.BindingError=Ee(Error,"BindingError"),vn(),Ye(),Br(),ze=r.UnboundTypeError=Ee(Error,"UnboundTypeError"),yn();var sn={L:Wr,v:ct,c:Et,k:tt,i:jt,f:xt,A:St,D:se,I:rr,y:zr,x:st,a:hn,H:qr,u:mn,o:Gr,h:bn,d:Pn,t:Tn,q:Qr,p:Zr,B:Er,J:Rn,N:$t,O:En,n:tn,r:rn,G:Sn,E:Sr,F:Dn,C:Mt,s:on,b:Z,z:J,w:A,e:a,l:_,m:o,j:p,K:x,g:Y,M:Gt};jr(),r.___wasm_call_ctors=function(){return(r.___wasm_call_ctors=r.asm.Q).apply(null,arguments)};var u=r._malloc=function(){return(u=r._malloc=r.asm.R).apply(null,arguments)},f=r.___cxa_free_exception=function(){return(f=r.___cxa_free_exception=r.asm.S).apply(null,arguments)},v=r._free=function(){return(v=r._free=r.asm.U).apply(null,arguments)},P=r.___getTypeName=function(){return(P=r.___getTypeName=r.asm.V).apply(null,arguments)};r.__embind_initialize_bindings=function(){return(r.__embind_initialize_bindings=r.asm.W).apply(null,arguments)};var $=r.setTempRet0=function(){return($=r.setTempRet0=r.asm.X).apply(null,arguments)},D=r.stackSave=function(){return(D=r.stackSave=r.asm.Y).apply(null,arguments)},O=r.stackRestore=function(){return(O=r.stackRestore=r.asm.Z).apply(null,arguments)},R=r.stackAlloc=function(){return(R=r.stackAlloc=r.asm._).apply(null,arguments)},U=r.___cxa_can_catch=function(){return(U=r.___cxa_can_catch=r.asm.$).apply(null,arguments)},L=r.___cxa_is_pointer_type=function(){return(L=r.___cxa_is_pointer_type=r.asm.aa).apply(null,arguments)};r.dynCall_ji=function(){return(r.dynCall_ji=r.asm.ba).apply(null,arguments)},r.dynCall_iiji=function(){return(r.dynCall_iiji=r.asm.ca).apply(null,arguments)},r.dynCall_jiji=function(){return(r.dynCall_jiji=r.asm.da).apply(null,arguments)};function J(n,i,c){var h=D();try{return ye(n)(i,c)}catch(m){if(O(h),m!==m+0)throw m;_setThrew(1,0)}}function Z(n,i){var c=D();try{return ye(n)(i)}catch(h){if(O(c),h!==h+0)throw h;_setThrew(1,0)}}function Y(n,i,c,h,m,t,e,s,l,g,b){var C=D();try{ye(n)(i,c,h,m,t,e,s,l,g,b)}catch(T){if(O(C),T!==T+0)throw T;_setThrew(1,0)}}function a(n,i){var c=D();try{ye(n)(i)}catch(h){if(O(c),h!==h+0)throw h;_setThrew(1,0)}}function o(n,i,c,h){var m=D();try{ye(n)(i,c,h)}catch(t){if(O(m),t!==t+0)throw t;_setThrew(1,0)}}function p(n,i,c,h,m){var t=D();try{ye(n)(i,c,h,m)}catch(e){if(O(t),e!==e+0)throw e;_setThrew(1,0)}}function _(n,i,c){var h=D();try{ye(n)(i,c)}catch(m){if(O(h),m!==m+0)throw m;_setThrew(1,0)}}function A(n,i,c,h){var m=D();try{return ye(n)(i,c,h)}catch(t){if(O(m),t!==t+0)throw t;_setThrew(1,0)}}function x(n,i,c,h,m,t,e){var s=D();try{ye(n)(i,c,h,m,t,e)}catch(l){if(O(s),l!==l+0)throw l;_setThrew(1,0)}}r.ccall=yr;var I;et=function n(){I||S(),I||(et=n)};function S(n){if(Ze>0||(wr(),Ze>0))return;function i(){I||(I=!0,r.calledRun=!0,!be&&(Dr(),W(r),r.onRuntimeInitialized&&r.onRuntimeInitialized(),Or()))}r.setStatus?(r.setStatus("Running..."),setTimeout(function(){setTimeout(function(){r.setStatus("")},1),i()},1)):i()}if(r.preInit)for(typeof r.preInit=="function"&&(r.preInit=[r.preInit]);r.preInit.length>0;)r.preInit.pop()();return S(),r.ready}})();d.exports=w})(vi);var fo=vi.exports,co=qn(fo);const lo=new URL("/cursor-dicom-viewer/assets/openjphjs-CANpALFP.wasm",import.meta.url),jn={codec:void 0,decoder:void 0,decodeConfig:{}};function po(d,y,w){const F={width:y,height:w};for(;d>0;)F.width=Math.ceil(F.width/2),F.height=Math.ceil(F.height/2),d--;return F}function vo(d){if(jn.decodeConfig=d,jn.codec)return Promise.resolve();const y=co({locateFile:w=>w.endsWith(".wasm")?lo.toString():w});return new Promise((w,F)=>{y.then(k=>{jn.codec=k,jn.decoder=new k.HTJ2KDecoder,w()},F)})}async function ho(d,y){await vo();const w=new jn.codec.HTJ2KDecoder,F=w.getEncodedBuffer(d.length);F.set(d);const k=y.decodeLevel||0;w.decodeSubResolution(k);const r=w.getFrameInfo();if(y.decodeLevel>0){const{width:Ot,height:Ge}=po(y.decodeLevel,r.width,r.height);r.width=Ot,r.height=Ge}const W=w.getDecodedBuffer();new Uint8Array(W.length).set(W);const M=`x: ${w.getImageOffset().x}, y: ${w.getImageOffset().y}`,z=w.getNumDecompositions(),B=w.getNumLayers(),q=["unknown","LRCP","RLCP","RPCL","PCRL","CPRL"][w.getProgressionOrder()+1],V=w.getIsReversible(),K=`${w.getBlockDimensions().width} x ${w.getBlockDimensions().height}`,G=`${w.getTileSize().width} x ${w.getTileSize().height}`,re=`${w.getTileOffset().x}, ${w.getTileOffset().y}`,ue=`${W.length.toLocaleString()} bytes`,ke=`${(W.length/F.length).toFixed(2)}:1`,le={columns:r.width,rows:r.height,bitsPerPixel:r.bitsPerSample,signed:r.isSigned,bytesPerPixel:y.bytesPerPixel,componentsPerPixel:r.componentCount};let Te=go(r,W);const{buffer:_e,byteOffset:ie,byteLength:Ae}=Te,be=_e.slice(ie,ie+Ae);Te=new Te.constructor(be);const Me={imageOffset:M,numDecompositions:z,numLayers:B,progessionOrder:q,reversible:V,blockDimensions:K,tileSize:G,tileOffset:re,decodedSize:ue,compressionRatio:ke};return{...y,pixelData:Te,imageInfo:le,encodeOptions:Me,...Me,...le}}function go(d,y){return d.bitsPerSample>8?d.isSigned?new Int16Array(y.buffer,y.byteOffset,y.byteLength/2):new Uint16Array(y.buffer,y.byteOffset,y.byteLength/2):d.isSigned?new Int8Array(y.buffer,y.byteOffset,y.byteLength):new Uint8Array(y.buffer,y.byteOffset,y.byteLength)}function yo(d,y){const w=d.length,{rescaleSlope:F,rescaleIntercept:k,suvbw:r}=y;if(y.modality==="PT"&&typeof r=="number"&&!isNaN(r))for(let W=0;W<w;W++)d[W]=r*(d[W]*F+k);else for(let W=0;W<w;W++)d[W]=d[W]*F+k;return!0}function _o(d){let y=d[0],w=d[0],F;const k=d.length;for(let r=1;r<k;r++)F=d[r],y=Math.min(y,F),w=Math.max(w,F);return{min:y,max:w}}function hi(d,y){let w;return Number.isInteger(d)&&Number.isInteger(y)&&(d>=0?y<=255?w=Uint8Array:y<=65535&&(w=Uint16Array):d>=-128&&y<=127?w=Int8Array:d>=-32768&&y<=32767&&(w=Int16Array)),w||Float32Array}function mo(d,y,w){return hi(d,y)===w}function wo(d){return d==="RGB"||d==="PALETTE COLOR"||d==="YBR_FULL"||d==="YBR_FULL_422"||d==="YBR_PARTIAL_422"||d==="YBR_PARTIAL_420"||d==="YBR_RCT"||d==="YBR_ICT"}const bo={bilinear:mi,replicate:wi},ii={Uint8Array,Uint16Array,Int16Array,Float32Array};function Po(d,y,w,F){var le,Te,_e;const k=d.pixelRepresentation!==void 0&&d.pixelRepresentation===1,r=k&&d.bitsStored!==void 0?32-d.bitsStored:void 0;if(k&&r!==void 0)for(let ie=0;ie<d.pixelData.length;ie++)d.pixelData[ie]=d.pixelData[ie]<<r>>r;let W=d.pixelData;d.pixelDataLength=d.pixelData.length;const{min:H,max:M}=_o(d.pixelData),z=typeof y.allowFloatRendering<"u"?y.allowFloatRendering:!0;let B=wo(d.photometricInterpretation)&&((le=y.targetBuffer)==null?void 0:le.offset)===void 0;const V=((Te=y.preScale)==null?void 0:Te.enabled)&&Object.values(y.preScale.scalingParameters).some(ie=>typeof ie=="number"&&!Number.isInteger(ie)),K=!y.preScale.enabled||!z&&V,G=(_e=y.targetBuffer)==null?void 0:_e.type;if(G&&y.preScale.enabled&&!K){const{rescaleSlope:ie,rescaleIntercept:Ae}=y.preScale.scalingParameters,be=ie*H+Ae,Me=ie*M+Ae;B=!mo(be,Me,ii[G])}G&&!B?W=To(y,d,ii,W):y.preScale.enabled&&!K?W=Co(y,H,M,d):W=gi(H,M,d);let re=H,ue=M;if(y.preScale.enabled&&!K){const ie=y.preScale.scalingParameters;yi(ie);const{rescaleSlope:Ae,rescaleIntercept:be}=ie;if(typeof Ae=="number"&&typeof be=="number"){yo(W,ie),d.preScale={...y.preScale,scaled:!0};const{rescaleIntercept:Ot,rescaleSlope:Ge,suvbw:yt}=ie;re=Ge*H+Ot,ue=Ge*M+Ot,yt&&(re=re*yt,ue=ue*yt)}}else K&&(d.preScale={enabled:!0,scaled:!1},re=H,ue=M);d.pixelData=W,d.smallestPixelValue=re,d.largestPixelValue=ue;const ke=new Date().getTime();return d.decodeTimeInMS=ke-w,d}function To(d,y,w,F){const{arrayBuffer:k,type:r,offset:W=0,length:H,rows:M}=d.targetBuffer,z=w[r];if(!z)throw new Error(`target array ${r} is not supported, or doesn't exist.`);M&&M!=y.rows&&$o(y,d.targetBuffer,z);const B=y.pixelDataLength,q=W,V=H??B-q,K=y.pixelData;if(V!==K.length)throw new Error(`target array for image does not have the same length (${V}) as the decoded image length (${K.length}).`);const G=k?new z(k,q,V):new z(V);return G.set(K,0),F=G,F}function Co(d,y,w,F){const k=d.preScale.scalingParameters;yi(k);const{rescaleSlope:r,rescaleIntercept:W}=k,H=typeof r=="number"&&typeof W=="number";let M=y,z=w;return H&&(M=r*y+W,z=r*w+W),gi(M,z,F)}function gi(d,y,w){const F=hi(d,y),k=new F(w.pixelData.length);return k.set(w.pixelData,0),k}function yi(d){if(!d)throw new Error("options.preScale.scalingParameters must be defined if preScale.enabled is true, and scalingParameters cannot be derived from the metadata providers.")}function Ao(d,y,w){const{samplesPerPixel:F}=d,{rows:k,columns:r}=y,W=k*r*F,H=new w(W),M=H.byteLength/W;return{pixelData:H,rows:k,columns:r,frameInfo:{...d.frameInfo,rows:k,columns:r},imageInfo:{...d.imageInfo,rows:k,columns:r,bytesPerPixel:M}}}function $o(d,y,w){const F=Ao(d,y,w),{scalingType:k="replicate"}=y;return bo[k](d,F),Object.assign(d,F),d.pixelDataLength=d.pixelData.length,d}async function Ro(d,y,w,F,k,r){const W=new Date().getTime();let H=null,M;switch(y){case"1.2.840.10008.1.2":case"1.2.840.10008.1.2.1":H=ei(d,w);break;case"1.2.840.10008.1.2.2":H=Ui(d,w);break;case"1.2.840.10008.1.2.1.99":H=ei(d,w);break;case"1.2.840.10008.1.2.5":H=xi(d,w);break;case"1.2.840.10008.1.2.4.50":M={...d},H=Gi(w,M);break;case"1.2.840.10008.1.2.4.51":H=Yi(d,w);break;case"1.2.840.10008.1.2.4.57":H=ti(d,w);break;case"1.2.840.10008.1.2.4.70":H=ti(d,w);break;case"1.2.840.10008.1.2.4.80":M={signed:d.pixelRepresentation===1,bytesPerPixel:d.bitsAllocated<=8?1:2,...d},H=ri(w,M);break;case"1.2.840.10008.1.2.4.81":M={signed:d.pixelRepresentation===1,bytesPerPixel:d.bitsAllocated<=8?1:2,...d},H=ri(w,M);break;case"1.2.840.10008.1.2.4.90":M={...d},H=ni(w,M);break;case"1.2.840.10008.1.2.4.91":M={...d},H=ni(w,M);break;case"3.2.840.10008.1.2.4.96":case"1.2.840.10008.1.2.4.201":case"1.2.840.10008.1.2.4.202":case"1.2.840.10008.1.2.4.203":M={...d},H=ho(w,M);break;default:throw new Error(`no decoder for transfer syntax ${y}`)}if(!H)throw new Error("decodePromise not defined");const z=await H,B=Po(z,k,W);return r==null||r(B),B}const Eo={decodeTask({imageFrame:d,transferSyntax:y,decodeConfig:w,options:F,pixelData:k,callbackFn:r}){return Ro(d,y,k,w,F,r)}};Xn(Eo);
